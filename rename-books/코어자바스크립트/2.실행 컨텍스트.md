# 02. 실행 컨텍스트

- 실행컨텍스트 : 실행할 코드에 제공할 환경 정보들을 모아놓은 객체 
- 실행컨텍스트가 활성화 되는 시점에 일어나는 일 : 
	- 선언된 변수를 위로 끌어올린다. 
	- 외부 환경 정보를 구성한다. 
	- this 값을 설정하는 등의 동작을 수행한다. 


## 01 실행 컨텍스트란? 

- 일반적으로 실행 컨텍스트를 구성하는 방법은 함수를 실행하는 것이다. 
- 함수를 호출 할 때 실행컨텍스트에서 일어나는 일은? 
	- 자바스크립트 엔진은 함수에 대한 환경 정보를 수집해서 함수 실행 컨텍스트를 생성한 후 콜 스택에 담습니다. 
		- 질문 : 함수에 대한 환경 정보란 무엇을 말하는 것인가? 
- 실행 컨텍스트가 실행될 때, 담기는 환경정보들은 다음과 같다. 
	- variableEnvironment : 현재 컨텍스트 내의 식별자들에 대한 정보 + 외부 환경 정보. 선언 시점의 LexicalEnvironment의 스냅샷으로, 변경 사항은 반영되지 않음
	- LexicalEnvironment : 처음에는 VariableEnvironment와 같지만 변경 사항이 실시간으로 반영된다. 
	- ThisBinding : this 식별자가 바라봐야 할 대상 객체 

## 02 VariableEnvironment 

- VariableEnviroment에 담기는 내용은 LexicalEnvioment와 같지만 최초 실행시의 스냅샷을 유지한다는 점이 다르다. 
	- 내부는 
	- environmentRecord와 
	- outerEnvironmentReference로 구성되어있다. 


## 03 LexicalEnvironment 

- Lexical이라는 단어 이해하기 
	- 현재 컨텍스트의 내부에는 a,b,c와 같은 식별자들이 있고 그 외부 정보는 D를 참조하도록 구성되어있다. 
		- 라는 컨텍스트를 구성하는 환경 정보들을 사전에서 접하는 느낌으로 모아놓은 것이다. 

### 2.3.1 environmentRecord와 호이스팅 

- environmentRecord에는 현재 컨텍스트와 코드의 식별자 정보들이 저장된다. 컨텍스트 내부 전체를 처음부터 끝까지 쭉 훑어가며 순서대로 정보를 수집한다. 
	- 저장되는 정보들 
		- 매개변수 식별자
		- 선언한 함수 
		- var로 선언된 변수의 식별자 
	- 이 친구는 오직 식별자에만 관심이 있다. 식별자에 어떤 값이 할당될 것인지는 관심을 가지지 않는다. 

- 호이스팅 : 
	- 코드를 실행하기 전임에도 js엔진은 이미 해당 환경에 속한 코드의 변수명들을 모두 알고 있는 셈이다. 
	- 자바스크립트 엔진은 식별자들을 최상단으로 끌어올려놓은 다음 실제 코드를 실행한다 라고 이해해도 문제가 없는 것이다. 


- 함수와 실행컨텍스트 
	- 변수는 선언부와 할당부를 나누어 선언부만 끌어올리는 반면 함수 선언은 함수 전체를 끌어올린다. 

- 함수 선언문과 함수 표현식의 차이 
	- 호이스팅이 이루어질 때, 함수 선언문은 함수 전체를 호이스팅하지만, 
	- 표현식은 변수 선언부만 호이스팅 한다. 


### 2.3.2 스코프, 스코프 체인, outerEnvironmentReference 

- 스코프란 식별자에 대한 유효범위를 말한다. 
- 자바스크립트는 오직 함수에 의해서만 스코프가 생성된다. 
	- es6에서는 블록에 의해서도 스코프가 생성된다. 
- 스코프체인이란 무엇인가? 
	- 식별자의 유효범위를 안에서부터 바깥으로 차례로 검색해나가는 것을 스코프 체인이라고 한다. 
		- 이것을 가능하게 하는 것이 outerEnvironmentReference이다. 


#### 스코프 체인 

- outerEnvironmentReference는 현재 호출된 함수가 '선언될' 당시의 LexicalEnvironment를 참조한다. 
	- outerEnvironmentReference는 연결리스트의 형태를 띈다. 
	- 선언 시점의 LexicalEnvironment를 계속 찾아 올라가면 마지막엔 전역 컨텍스트의 LexicalEnvironment가 있을 것이다. 

- 변수 은닉화 
	- inner 함수 내부에도 a변수가 선언되어있고, 전역공간에도 a변수가 선언되어 있는 경우 전역공간의 a 변수에 접근할 수 없는 현상 
- 