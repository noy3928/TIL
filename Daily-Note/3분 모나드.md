### 날짜 : 2022-11-11 12:00
### 주제 : #함수형프로그래밍 #모나드 #제네릭 #추상화 

---- 

### 메모 : 

> 어떤 타입 M에 대해 아래의 두 함수, pure와 compose가 존재할 때, M은 모나드입니다. 

```javascript
type Pure = <A>(a: A) => M<A>; 
type Compose = <A, B, C>(f : (a:A)) => M<B>, g: (a : B) => M<C>) => (a : A) => M<C>;
```
- 이것이 프로그래밍에서의 모나드의 정의라고 한다. 
	- 생각보다 간단하지 않냐고 묻는데 나에게는 그렇게 간단해 보이지는 않는다. 

```javascript
type Maybe<A> = A | null;

function pure<A>(value : A) : Maybe<A> {
	return value;
}

function compose<A,B,C>(f : (a:A) => Maybe<B>, g : (a : B) => Maybe<C>) : (a: A) => Maybe<C> {
	return (a : A) => Maybe<C> => {
		const ma = f(a);

		if(ma === null) return null;
		else g(ma);
	}
}
```


- 이런 형식과 정의를 가진 모나드는 어떤 의의를 가지는가? 

- 프로그램을 작성할 때 중요한 개념 중 하나가 '연산'이다. 
	- 프로그램은 어쩌면 '연산의 명세'라고 볼 수 있다. 
	- 하지만 종종 개발자들은 '값'만 우대하곤 한다. '값'을 모델링하긴 하지만, '연산'을 어떻게 모델링할 지는 생각하지 않는다는 것이다. 
	- 여기서 말하는 모델링은 추상화한다는 것이다. 
		- 추상화의 한 방식으로 분류라는 방식이 존재한다. 
		- 어떤 카테고리를 나눈다는 행위자체가 추상화의 작업이라고 할 수 있다. 
			- 우리는 '값'뿐만이 아니라, '연산'도 분류를 나누어 생각해볼 수 있다. 
			- 그 연산 중에서도 '실패할 수 있는 연산'도 하나의 분류로 생각해볼 수 있다. 
				- 이것은 어떻게 정의내릴 수 있을까? 조금 더 명확하고 구체적인 언어가 필요하다. 
				- 우리는 의미론이라는 것을 활용해 연산에 대한 충분히 명확하고 구체적인 정의를 내린다. 
					- 다양한 의미론 중에서 범주 의미론이라는 것이 있다. 
					- 카테고리 이론, 즉 범주론은 집합론의 반대에 해당하는 개념이다. '요소' 대신 '요소들 간의 관계'에 주목하는 것이다. 
					- 중요한 것은 모나드가 이 이론의 개념이다. 유지니오 모기라는 컴퓨터 과학자가 범주 의미론에서 모나드로 연산을 정의하고 추상화할 수 있다는 것을 발견했다. 
- 이 지점에서 모나드의 의의를 이해할 수 있다. 
	- 모나드는 연산을 정의하고, 추상화하기 위해서 사용되는 것이다. 
	- 하지만 어떤 연산을 정의한다는 것일까? 모나드로 연산을 정의하면 무엇이 좋은 것일까? 

- 왜 연산을 추상화하는 것일까? 
	- 제네릭을 아는가? 제네릭은 여러 데이터들에 대해 일반적인, 즉, 유연한 코드를 작성함으로써 재사용성을 끌어올리는 방식이다. 

```javascript
class List<T>{
	public readonly head : T;
	public readonly tail? : List<T>;

	constructor(head : T, tail?: List<T>){
		this.head = head;
		this.tail = tail;
	}
}
```
- 모든 타입에 대해서 리스트가 담고 있는 값은 다를지언정, 리스트 자체의 구조는 같다. 
	- 앞 부분과 뒷 부분이 있다는 것이다. 
	- 위 코드는 제네릭의 예시가 된다. 
	- 이렇게 함으로써 이런 데이터 구조를 가진 것들에 대해서 재사용성을 높일 수 있다. 
	- 여기서 또 유추해볼 수 있는 것은 데이터구조로 인한 재사용성의 향상이다. 

- 이와 같은 방식으로 데이터 뿐만이 아니라, 연산도 추상화할 수 있다면 어떨까? 
	- 코드의 재사용성이 증폭될 것이다. 
	- 어떤 연산이 범주 의미론에서 모나드로 추상화된다면 그 연산은 '합칠 수 있음'이 보장된다. 
		- 이 문장이 무슨 말인지 모르겠다. 
	- 수학적으로, 모나드의 성질이 바로 '합칠 수 있음'이다. 
	- 즉, 모나드는 '합칠 수 있는 연산'을 정의하고 추상화하기 위해 쓴다고 할 수 있다. 
		- 연산이 합쳐진다는 것은 어떤 의미를 가지고 있는 것일까? 
		- 이것은 어떤 가치를 가지는 것일까? 

- 모든 프로그램은 연산이다. 
	- 부 프로그램이란, 곧 함수를 말한다. 
	- 프로그램은 부프로그램들로 이루어져있다. 즉, 함수들로 이루어져있다는 것이다. 
	- 모나드로 정의된 연산은 합쳐질 수 있다??? 
		- 이 문장이 가장 이해가 안되는 것 같다. 
	- 어떤 연산이 모나드로 정의된다면, 그 연산에 해당하는 모든 프로그램들은 합쳐질 수 있다. 


> 모든 이야기를 종합하자면 모나드의 속뜻, 즉, 어떤 것이 모나드임이 시사하는 바는 그것이 합성될 수 있는 연산이라는 것입니다. 


> 어떤 타입 M에 대해 두 함수, pure과 compose가 존재할 때, M은 모나드이다. 

- 타입 M 부터 살펴보자. 
	- 타입 M은 연산 M을 의미한다. 타입 `M<A>`는 A타입의 연산 M을 의미한다. 
		- `M<number>`는 number 타입의 값을 만드는 연산 M을 의미한다.
		- 타입M은 연산과 어떤 관계가 있는 것일까? 
	- 타입 M이 연산을 대표하는 이유는 모든 프로그램을 A타입의 값을 받아 연산 M을 수행하여 B 타입의 값을 내놓는 함수라고 볼 수 있다는 점에서 그렇다. (오.. 확실히 연산이라는 것을 추상화시킨 것 같다.)
		- 모든 일차방정식이 `ax + b = 0`으로 표현될 수 있는 것처럼, 모든 프로그램 또한 `A => M<B>` 타입으로 표현될 수 있다. 
		- 여기서 타입 A와 B는 항상 중복되기 때문에 각 프로그램의 차이는 연산을 나타내는 타입 M으로부터 비롯됨을 알 수 있다. 
			- 타입 M이 곧 다른 프로그램과의 차이점을 만들어낸다는 것이다. 
- 이제 compose 에 대해서 알아보자. 
	- compose 함수의 시그니처는 `<A,B,C>(f : (a:A) => M<B>, g : (a:B) => M<C> => (a : A) => M<C>` 이다. 
		- 같은 연산을 하는 두 프로그램을 받아 하나로 합치는 형태이다. 
		- 모나드가 '합성할 수 있는 연산'을 정의하며 추상화하는 도구라는 점을 잊지 말아야 한다. 
		- 바로 이 compose함수가 모나드의 연산인 합성 가능성을 보장하는 함수다. 
		- 모나드가 되려면 이 함수를 구현해야 한다. 
			- 때문에 모나드인 모든 연산은 합성할 수 있다고 말하는 것이다. 
		- 즉, compose함수는 합성 가능한 연산들만이 모나드가 될 수 있게 하기 위해 존자하는 제한이다. 
- 마지막으로 pure 함수의 의미에 대해 알아보자. 
	- pure 함수는 일반적인 값을 연산 M이 적용된 값인 것처럼 꾸며주는 함수다. 




### 내 생각과 정리 : 
- 기가막히는 설명들이다. 특히 연산을 추상화한다는 개념이 너무나 재미있게 다가왔다. 
- 특정 개념들을 분류하는 범주론. 어떤 사물을 분류하는 범주와, 특정 행동을 분류하는 범주가 있을 수 있다. 프로그래밍에서도 값을 분류하는 범주와, 연산을 분류하는 범주가 있을 수 있다. 그 중에서 연산을 분류하는 범주에 모나드가 속한다. 모나드는 연산을 추상화했다. 

- 연산을 추상화한다는 것은 어떤 유익이 있는 것인가? 프로그래밍에서 무언가를 추상화한다는 것은 그것의 재사용성이 늘어난다는 의미가 된다. 함수형 프로그래밍에서 순수함수를 다루고, 함수를 잘게 쪼개는 지향성은 함수의 재사용성에 있다. 이 글에서 연산을 추상화함으로써, 재사용성을 늘린다는 이야기를 듣고, 역시 일관된 지향성을 가지는구나를 생각했다. 모나드는 어떤 측면에서 재사용성을 늘려줄 수 있다는 것이다. 

- 제네릭의 의미에 대해서 조금 더 깊이 이해할 수 있는 시간이 되기도 했다. 제네릭은 '일반적인'의 의미를 가지고 있다. 이것은 특정한 의미를 더욱 추상화시킨다는 것이다. 이것을 함수형 자바스크립트 책에서는 '승급'이라는 단어로 사용하기도 했다. '승급'은 영어로는 lifting이라고 부른다. 특정 대상을 승급 시킨다는 것은 그 대상을 더욱 일반적인 대상으로 끌어올린다는 의미가 된다. 이런 의미는 오브젝트 책에서 자주 읽었던  상위정책, 하위정책 등의 단어와도 일맥상통한다고 생각한다. 


### 출처(참고문헌) : 


### Link : 
