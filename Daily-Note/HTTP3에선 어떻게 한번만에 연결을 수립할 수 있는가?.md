#HTTP3 

# HTTP3에선 어떻게 한번만에 연결을 수립할 수 있는가?

- QUIC는 단 하나의 패킷 교환을 통해서 연결 수립이 가능하도록 디자인 되었다. 
	- 그 패킷은 이름하여 Initial Packet이다. 
	- 이 패킷은 필수적인 정보를 포함하고 있다. 
		- 서버가 클라이언트와 연결하기 위해서 필요한 정보 
			- CID(unique connection identifier)
			- 암호화 키의 모음  
			- 암호 연결 
- 만약 서버에게서 Initial Packet을 받고나면, 서버는 CID와 암호화키를 이용해서 클라이언트와 보안 커넥션을 수립할 수 있다. 
	- 이렇게 한 것이 TCP보다 빠르게 연결을 수립할 수 있었던 이유가 된다. 
	- 이렇게 하게 되면 Latencies를 줄일 수 있고, 웹의 전반적인 성능을 개선할 수 있다. 


## How server can establish a secure connection with the client using CID and cryptographic keys in QUIC?

- 서버가 initial packet을 수령하면, 서버는 그 안에 담겨 있는 CID와 암호화키를 사용하여 클라이언트와의 연결을 수립한다. 
	- 조금 더 명확하게 이야기하자면, 서버는 client를 식별하기 위해서 CID를 이용한다. 
	- 그리고 암호화 키를 이용해서 보안 채널을 생성한다. 
		- 이 보안 채널을 이용해서 클라이언트와 서버는 서로 의사소통한다. 
- 보안 채널을 만들기 위해서, "key exchange"라는 일련의 단계를 수행한다. 
	- 그리고 이 단계를 수행하는 이유는 암호화키를 안전하게 교환하기 위해서이다. 
	- 이것은 일반적으로 클라이언트와 서버가 메시지를 교환하는 것을 포함하고, 암호화 연산을 수행하는 것을 포함한다. 
		- 이 암호화 연산은 비밀 키를 공유하기 위함인데, 이 비밀 키는 서버와 클라이언트 사이의 메시지를 암호화하고 복호화하기 위해서 사용된다. 
- 키 교환이 완성되고 보안 채널이 만들어지고 나면, 클라이언트와 서버는 이 연결을 통해서 데이터를 보내고 받을 수 있게 된다. 
	- CID와 암호화 키는 오직 의도된 클라이언트와 서버만 서로간에 소통하는 것을 확실하게 하고 서로 간에 데이터를 주고받을 때 중간에 누군가 가로채여지거나 변조되지 않기 위해서 사용된다. 


## CID를 만드는 주체는 서버인가? 

- 서버만 CID를 만드는 것은 아니다. 
	- 클라이언트와 서버 둘 다 CID를 생성한다. 
- 클라이언트가 서버와 커넥션을 생성하기 원한다면, 이것은 CID를 생성하고 initial 패킷에 포함시킨다. 그리고 이것을 서버에 보낸다. 
	- 그리고 서버는 그 자신만의 CID를 생성하고 그것을 다시 응답 패킷에 담아서 클라이언트에 보낸다. 
	- 그러고 나면 클라이언트와 서버는 연결을 식별하고 둘 사이에 패킷들을 라우트하기 위해서 그들 각각의 CID를 사용한다. 
- CIDs가 각각의 연결에 대해서 유니크하다는 것을 주목하는 것은 중요하다. 
	- 그리고 이것들은 다른 연결에서 재사용되지도 않는다.
	- 이렇게 하는 것은 각각의 연결이 고유하게 식별될 수 있게 해준다. 
	- 그리고 패킷들이 정확한 연결들에 전달될 수 있도록 보장해준다. 


## 서버와 클라이언트는 CID를 이용해서 어떻게 서로를 식별하는가? 

- 클라이언트와 서버가 패킷을 서로에게 보낼 때, 이 패킷의 헤더에는 CID가 포함되어있다. 
	- 패킷을 받은 쪽에서는 연결을 식별하기 위해서 CID를 이용한다. 
	- 정확한 위치에 패킷을 보내기 위해서 CID를 이용한다. 
- 이 질문에 대한 부분은 명확한 대답을 얻지 못했다. 그래서 조금 더 자료를 찾아봐야할 것 같다. 






--- 
## 추가질문 :


[[연결수립 시 TCP와 QUIC은 어떤 차이점이 있는가?]]
