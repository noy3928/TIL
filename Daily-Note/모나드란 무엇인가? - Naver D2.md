### 날짜 : 2022-11-11 10:48
### 주제 : #함수형프로그래밍 #모나드 

---- 

### 메모 : 
- 모나드를 이해하고 나면, 설명하는 방법을 잊어버린다. 
- 하스켈의 학습곡선 
![[스크린샷 2022-11-11 오전 10.51.23.png]]
- 모나드를 만나고나면 생산성이 올라가게 된다. 

- 2가지를 이야기해볼 것이다. 
	- map과 flatmap 이 2가지이다. 
	- flatMap의 정의 : Array나 Object로 감싸져 있는 모든 원소를 단일 원소 스트림으로 반환해준다. 
		- 이렇게 이해하는 순간 고통이 시작된다. 모나드를 이해하기가 어려워진다.


- 모나드는 언제 사용될까? 
![[스크린샷 2022-11-11 오전 10.55.27.png]]
- 자바스크립트에서는 프로미스가 있다. 
- 프로미스가 사실은 모나드의 일종이다. 
	- 비동기 연산 처리를 할 때, 모나드가 사용될 수 있다. 
- null 처리를 할 때 모나드가 사용될 수 있다. 
- 값이 미래에 준비되거나, 값이 null인 경우를 모델링 할 때 모나드가 사용된다. 

- 모나드의 정의 : 
	- 모나드는 값을 담는 컨테이너의 일종이다. Functor를 기반으로 구현되었으며 flatMap()메서드를 제공한다. Monad Laws를 만족시키는 구현체를 말한다. 

- 함수자?? 
```java
interface Functor<T>{
	<R> Functor<R> map(Function<T,R> f);
}
```
1. 함수를 인자로 받는 map 메서드만 가진다. 
2. 타입 인자 `<T>`를 가진다. 
3. 전달인자인 함수 f는 `<T>` 타입 값을 받아 `<R>` 타입 값을 반환하는 함수이다. 

- map의 진정한 의미 
	- 컬렉션의 원소를 순회하는 방법 x 
	- `<T>` 타입의 Functor를 `<R>` 타입의 Functor로 바꾸는 기능 o 
- 함수자에는 map이라는 인터페이스 하나만 가지고 있다. 
	- 값을 꺼낼 수도 없고, 
	- 할 수 있는 일이라고는 map() 메소드로 값을 변경하는 것 뿐인, 
	- 군더더기 같은 Functor를 왜쓰는 것일까? 

- 함수자를 이용하는 이유 : 
	- Functor를 이용하면 일반적으로 모델링할 수 없는 상황을 모델링할 수 있다. 
		- ex1) 값이 없는 케이스 null 
		- ex2) 값이 미래에 준비될 것으로 예상되는 케이스 promise
			- 비동기도 동작하는 것들인데, 마치 동기로 동작하는 것처럼 작성할 수 있다. 
	- 함수들을 손쉽게 합성할 수 있다. 


- 모나드는 함수자에 flatmap을 추가한 것이다. 
	- 함수자에 문제가 있어서 모나드가 만들어진 것이다. 어떤 문제일까? 
		- 함수자 안에 함수자가 감싸져 있으면 함수의 합서오가 체이닝을 저해한다. 
		- 함수자가 두번 감싸지게 되면 함수자가 제 기능을 못하게 된다. 하지만, 함수자인 함수는 매우 일반적이다. 
	- 이런 문제를 해결하기 위해서 flatMap이 도입되었다. 
		- flatMap을 사용하면 합성과 체이닝이 가능해진다. 


- 모나드의 의의 
	- 값이 없는 상황이나, 값이 미래에 이용가능해질 상황 등, 일반적으로는 할 수 없는 여러 상황을 모델링할 수 있다는 것에 의의가 있다. 
	- 비동기 로직을 동기 로직을 구현하는 것과 동일한 형태로 구현하면서도, 함수의 합성 및 완전한 non-blocking pipeline을 구현할 수 있다. 



### 내 생각과 정리 : 
- 이 강의를 듣고서도 함수자와 모나드를 완벽하게 이해했다는 생각이 들지는 않는다. 
- 구체적으로 null 과 비동기 상황에서 왜 함수자와 모나드를 사용하는지 아직도 이해되지 않는다. 
	- 이것들을 모델링할 수 있다고 했는데, 모델링 한다는 것은 무슨 의미인가? 모델링은 왜 필요한 것인가? 
- 함수자의 불편함은 이제 알 것 같긴하다. 함수자로 계속 값을 받고 반환하다보면, 여러개의 함수자로 중첩되어서 함수를 합성하기가 어려워지고, 이것을 체이닝 하기도 어려워진다는 점은 동감된다. 
- 다른 자료들도 조금 더 찾아보고 이해를 해볼 필요가 있을 것 같다. 


### 출처(참고문헌) : 
[Monad란 무엇인가?](https://youtu.be/jI4aMyqvpfQ)


### Link : 
