## 2.1 타입이란

### 1. 자료형으로서의 타입

- undefined, null, Boolean, String, Symbol, Numeric, Object
- 데이터타입은 여러 종류의 데이터를 식벼하는 분류 체계로 컴파일러에 값의 형태를 알려준다.
- 개발자는 타입을 사용해서 값의 종류를 명시할 수 있고 메모리를 더욱 효율적으로 사용할 수 있다.

### 2. 집합으로서의 타입

- 예시에서 소개된 타입은 집합의 경계처럼 함수의 인자로 들어갈 수 있는 값을 number 타입의 집합으로 제한한다.

### 3. 정적 타입과 동적 타입

- 타입을 결정하는 시점에 따라 정적 타입과 동적 타입으로 분류할 수 있다.

> 컴파일 타임과 런타임 : 기계가 소스코드를 이해할 수 있도록 기계어로 변환되는 시점을 컴파일타임이라고 하며, 이후 변환된 파일이 메모리에 적재되어 실행되는 시점을 런타임이라고 부른다.

### 4. 강타입과 약타입

- 개발자가 의도적으로 타입을 명시하거나 바꾸지 않았는데도 컴파일러 또는 엔진 등에 의해서 런타임에 타입이 자동으로 변경되는 것을 암묵적 타입 변환이라고 한다.
- 암묵적 타입 변환 여부에 따라 타입 시스템을 강타입과 약타입으로 분류할 수 있다.
  - 강타입 특징을 가진 언어에서는 서로 다른 타입을 갖는 값끼리 연산을 시도하면 컴파일러 또는 인터프리터에서 에러가 발생한다.
  - 약타입 특징을 가진 언어에서 서로 다른 타입을 갖는 값끼리 연산할 때는 컴파일러 또는 인터프리터가 내부적으로 판단해서 특정 값의 타입을 변환하여 연산을 수행한 후 도출한다.
- 암묵적 변환은 개발자가 명시적으로 타입을 변환하지 않아도 다른 데이터 타입끼리 연산을 진행할 수 있는 편리함을 제공하지만, 작성자의 의도와 다르게 동작할 수 있기 때문에 예기치 못한 오류가 발생할 가능성도 높아진다.
- 타입 시스템 :
  - 타입 검사기가 프로그램에 타입을 할당하는 데 사용하는 규칙 집합을 타입 시스템이라고 한다. 크게 2가지가 있다. 명시적으로 알려주는 타입 시스템, 자동으로 추론하는 타입 시스템.
  - 타입스크립트는 2가지 다 영향을 받았다. 즉, 개발자는 직접 타입을 명시하거나, 타입스크립트가 타입을 추론하도록 하는 방식 중에서 선택할 수 있다

### 5. 컴파일 방식

- 타입스크립트의 컴파일 결과물은 사람이 이해할 수 있는 방식인 자바스크립트 파일이다.

## 2.2 타입스크립트의 타입 시스템

### 1. 타입 애너페이션 방식

- 타입 애너테이션이란 변수나 상수 혹은 함수의 인자와 반환 값에 타입을 명시적으로 선언해서 어떤 타입 값이 저장될 것인지를 컴파일러에 직접 알려주는 문법이다.

### 2. 구조적 타이핑

- 명목적으로 구체화한 타입 시스템 : 이름으로 구분된다.
- 구조적 타이핑 : 이름으로 타입을 구분하는 것이 아니라, 구조로 타입을 구분한다.

### 3. 구조적 서브타이핑

- 타입스크립트의 타입은 값의 집합으로 생각할 수 있다. 타입은 단지 집합에 포함되는 값이고 특정 값은 많은 집합에 포함될 수 있다.
- 이처럼 집합으로 나타낼 수 있는 타입스크립트의 타입 시스템을 지탱하고 있는 개념이 바로 구조적 서브타이핑이다.
- 구조적 서브타이핑이란 객체가 가지고 있는 속성을 바탕으로 타입을 구분하는 것이다. 이름이 다른 객체라도 가진 속성이 동일하다면 타입스크립트는 서로 호환이 가능한 동일한 타입으로 여긴다.

```ts
interface Pet {
  name: string;
}

interface Cat {
  name: string;
  age: number;
}

let pet: Pet;
let cat: Cat = { name: "luna", age: 7 };

pet = cat; // OK!
```

- Cat은 Pet과 다른 타입으로 선언되었지만 Pet이 갖고 있는 name이라는 속성을 가지고 있다. 따라서 Cat타입으로 선언한 cat을 Pet타입으로 선언한 pet에 할당할 수 있다.
- 전달되는 객체가 인터페이스에 정의된 속성을 모두 갖고 있다면, 타입스크립트는 전달된 객체를 인터페이스로 변환한다. 이를 구조적 타이핑이라고 한다.
- 서로 다른 두 타입간의 호환성은 오로지 타입 내부의 구조에 의해 결정된다. 타입A가 타입B의 서브타입이라면 A타입의 인스턴스는 B타입이 필요한 곳에 언제든지 위치할 수 있다.

### 4. 자바스크립트를 닮은 타입스크립트

- 명몽적 타이핑을 채택한 언어에서는 이름으로 타입을 구분하기 때문에 구조가 같더라도 이름이 다르다면 다른 타입으로 구분된다.
- 명목적 타이핑은 타입의 동일성을 확인하는 과정에서 구조적 타이핑에 비해 조금 더 안전한다. 개발자가 의도한 타입이 아니라면 변수에 타입을 명시하는 과정에서 에러를 내뱉기 때문이다.
- 타입스크립트가 구조적 타이핑을 채택한 이유 :
  - 자바스크립트는 본질적으로 덕 타이핑을 기반으로 한다. 덕 타이핑은 어떤 함수의 매개변숫값이 올바르게 주어진다면 그 값이 어떻게 만들어졌는지 신경 쓰지 않고 사용한다는 개념이다.
  - 타입스크립트는 이런 동작을 그대로 모델링한다. 타입스크립트는 js의 특징을 그대로 받아들여 명시적인 이름을 가지고 타입을 구분하는 대신, 객체나 함수가 가진 구조적 특징을 기반으로 타이핑하는 방식을 채택했다.
  - 덕 타이핑과 구조적 타이핑의 차이는 타입을 검사하는 시점에 있다. 덕 타이핑은 런타임에 타입을 검사하지만 구조적 타이핑은 컴파일 타임에 타입을 검사한다.

### 5. 구조적 타이핑의 결과

- 이런 구조적 타이핑의 특징 때문에 예기치 못한 결과가 나올 수도 있다.

```js
interface Cube {
  width: number;
  height: number;
  depth: number;
}

function addLines(c: Cube) {
  let total = 0;

  for (const axis of Object.keys(c)) {
    const length = c[axis];
    total += length;
  }
}
```

- addLines 함수의 매개변수인 c는 Cube타입으로 선언되었고, Cube인터페이스의 모든 필드는 number 타입을 가지기 때문에 c[axis]는 number타입이라고 예측할 수 있다. 하지만, c에 들어올 객체는 Cube의 width, height, depth 외에도 어떤 속성이든 가질 수 있다. 그래서 c[axis]가 number타입이라고 확신할 수 없다. string일 수도 있는 것이다.
- 이것이 구조적 타이핑의 특징으로 Cube타입 값이 들어갈 수 있는 곳에 name(string)같은 추가 속성을 가진 객체도 객체로 할당할 수 있기 떄문에 발생하는 문제이다.
- 이런 한계를 극복하고나 타입스크립트에 명목적 타이핑 언어의 특징을 가미한 식별할 수 있는 유니온 같은 방법이 생겨났다.

### 6. 타입스크립트의 점진적 타입 확인

- 점진적 타입검사한 컴파일 타임에 타입을 검사하면서 필요에 따라 타입 선언 생략을 허용하는 방식이다.
- 이러한 특성으로 인해 js->ts 마이그레이션에 도움이 된다.

### 7. 자바스크립트 슈퍼셋으로서의 타입스크립트

- 타입스크립트는 자바스크립트의 문법을 포함하고 있다.

### 8. 값 vs 타입

- 값은 프로그램이 처리하기 위해 메모리에 저장하는 모든 데이터다. 다르게 말하면 프로그램에서 조작하고 다룰 수 있는 어떤 표현이며 다양한 형태의 데이터를 포함한다.
- 함수 역시 변수에 할당할 수 있는 값이다.
- type으로 선언한 내용은 자바스크립트 런타임에서 제거되기 때문에 값 공간과 타입 공간은 서로 충돌하지 않는다. (같은 이름으로 선언되어 있어도 괜찮다.)
- 값과 타입은 타입스크립트에서 별도의 네임스페이스에 존재한다. 타입스크립트는 개발자가 작성한 코드 문맥을 파악해서 스스로 값 또는 타입으로 해석한다. 값이 사용되는 위치와 타입이 사용되는 위치가 다르기 때문에, 코드가 어디에서 사용되었는지에 따라 타입인지 값인지를 추론할 수 있는 것이다.
- 타입스크립트에는 값과 타입 공간에 존재하는 심볼도 있다. 대표적인 것이 클래스와 enum이다. 클래스는 값이면서 동시에 타입이다.

```js
class Developer {
  name: string;
  domain: string;

  constructor(name: string, domain: string) {
    this.name = name;
    this.domain = domain;
  }
}

const me: Developer = new Developer("Lee", "frontend");
```

- 타입스크립트에서 클래스는 타입 애너테이션으로 사용할 수 있지만 런타임에서 객체로 변환되어 자바스크립트의 값으로 사용되는 특징을 가지고 있다.
