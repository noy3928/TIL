> https://khalilstemmler.com/articles/enterprise-typescript-nodejs/application-layer-use-cases/

ìœ ìŠ¤ì¼€ì´ìŠ¤
ìœ ìŠ¤ì¼€ì´ìŠ¤ì™€ 'ê¸°ëŠ¥'ì€ ê±°ì˜ ê°™ì€ ê°œë…ì´ë‹¤. ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ êµ¬ì¶•í•˜ëŠ” ì „ì²´ ëª©ì ì€ í•˜ë‚˜ ì´ìƒì˜ ìœ ìŠ¤ì¼€ì´ìŠ¤ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•¨ì…ë‹ˆë‹¤.
ë§Œì•½ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ëª¨ë“  ê¸°ëŠ¥ì„ ì„¤ëª…í•  ìˆ˜ ìˆëŠ” íŠ¹ì • êµ¬ì¡°ê°€ ì½”ë“œì— ë‚˜íƒ€ë‚œë‹¤ë©´ ì–´ë–¨ê¹Œìš”? ì´ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ëª¨ë“  ê¸°ëŠ¥ì„ ìº¡ìŠí™”í•˜ê³  ì¡°ì§í•˜ë©° ì¶”ì í•˜ëŠ” ë° ë„ì›€ì´ ë  ê²ƒì…ë‹ˆë‹¤. ë‹¤í–‰íˆë„ ì´ëŸ¬í•œ êµ¬ì¡°ê°€ ì¡´ì¬í•˜ë©°, ë°”ë¡œ "ìœ ìŠ¤ì¼€ì´ìŠ¤"ë¼ê³  ë¶ˆë¦½ë‹ˆë‹¤.

ì´ ê¸€ì—ì„œëŠ” ì•„ë˜ì˜ ë‚´ìš©ì„ ë‹¤ë£° ê²ƒì…ë‹ˆë‹¤.

- ìœ ìŠ¤ì¼€ì´ìŠ¤ë¥¼ ë°œê²¬í•˜ëŠ” ë°©ë²•
- ì• í”Œë¦¬ì¼€ì´ì…˜ ê³„ì¸µì˜ ì—­í• 
- ìœ ìŠ¤ì¼€ì´ìŠ¤ê°€ ì†í•œ ì„œë¸Œë„ë©”ì¸ì„ ì‹ë³„í•˜ëŠ” ë°©ë²•
- ìœ ìŠ¤ì¼€ì´ìŠ¤ê°€ ëŒ€ê·œëª¨ í”„ë¡œì íŠ¸ë¥¼ ë” ì½ê¸° ì‰½ê²Œ ë§Œë“œëŠ” ë°©ë²•(ì†Œë¦¬ì¹˜ëŠ” ì•„í‚¤í…ì²˜)
- TypeScriptë¡œ ìœ ìŠ¤ì¼€ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ë°©ë²•

## 1. Discovering Use Cases

ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•˜ê¸° ìœ„í•œ ê³„íšì„ ì„¸ìš°ëŠ” ë°©ë²•ì—ëŠ” ì—¬ëŸ¬ ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤. ì˜ˆì „ì—ëŠ” API ì„¤ê³„ë¥¼ ë¨¼ì € í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì‹¤ì œë¡œ ì–´ë–»ê²Œ ë¬´ì–¸ê°€ë¥¼ êµ¬ì¶•í• ì§€ ê³„íší•˜ê³¤ í–ˆìŠµë‹ˆë‹¤.
ì´í›„ì—ëŠ” ì™€ì´ì–´í”„ë ˆì„ì„ ê·¸ë¦¬ê±°ë‚˜ ì¸í„°í˜ì´ìŠ¤ ì„¤ê³„ë¶€í„° ì‹œì‘í•˜ê²Œ ë˜ì—ˆëŠ”ë°, í”„ë¡ íŠ¸ì—”ë“œê°€ ì‹¤ì œë¡œ í•„ìš”í•œ ê²ƒê³¼ YAGNI(í•„ìš”í•˜ì§€ ì•Šì€ ê¸°ëŠ¥)ë¥¼ ê²°ì •í•˜ëŠ” ê²½ìš°ê°€ ë§ì•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
í”„ë¡œì íŠ¸ê°€ ì ì  ë³µì¡í•´ì§€ë©´ì„œ ë” ì „í†µì ì¸ ì†Œí”„íŠ¸ì›¨ì–´ ê³„íš ë°©ì‹ì´ í•„ìš”í•˜ë‹¤ëŠ” ê²ƒì„ ê¹¨ë‹¬ì•˜ìŠµë‹ˆë‹¤. ê·¸ ë°©ì‹ì´ ë°”ë¡œ ìœ ìŠ¤ì¼€ì´ìŠ¤ ì„¤ê³„ì…ë‹ˆë‹¤.

### ì „í†µì ì¸ ì ‘ê·¼ ë°©ì‹

ìœ ìŠ¤ì¼€ì´ìŠ¤ë¥¼ ì‹ë³„í•˜ê³  ë‹¤ì´ì–´ê·¸ë¨ìœ¼ë¡œ ê·¸ë¦¬ëŠ” ì „í†µì ì¸ ë°©ì‹ì´ ìˆìŠµë‹ˆë‹¤.

ìœ ìŠ¤ì¼€ì´ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ì—ì„œëŠ” ë§‰ëŒ€ì¸í˜•ì´ ì‹œìŠ¤í…œì˜ í–‰ìœ„ì(ì‚¬ìš©ì)ë¥¼ ë‚˜íƒ€ë‚´ê³ , ì›ì´ ì‹¤ì œ ìœ ìŠ¤ì¼€ì´ìŠ¤ë¥¼ ë‚˜íƒ€ë‚´ì–´ ì†Œí”„íŠ¸ì›¨ì–´ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ê³ ì í•˜ëŠ” ëª¨ë“  ìœ ìŠ¤ì¼€ì´ìŠ¤ë¥¼ ì‹œê°í™”í•©ë‹ˆë‹¤.

ì „í†µì ì¸ ìœ ìŠ¤ì¼€ì´ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨
ì´ ë‹¤ì´ì–´ê·¸ë¨ì„ ê·¸ë¦¬ëŠ” ë°©ë²•ì„ ì•„ëŠ” ê²ƒì€ ìœ ìš©í•˜ì§€ë§Œ, ì‹œìŠ¤í…œ ì„¤ê³„ë¥¼ ì´ëŸ¬í•œ ë¬¸ì„œë¥¼ ìƒì„±í•˜ëŠ” ë° ì´ˆì ì„ ë§ì¶”ì–´ ì‹œì‘í•˜ëŠ” ê²½ìš°ëŠ” ë“œë­…ë‹ˆë‹¤.

ëŒ€ì‹  ì¤‘ìš”í•œ êµ¬ì„± ìš”ì†Œë¥¼ ëŒ€í™”ë¡œ ì‹ë³„í•œ í›„, ììœ  í˜•ì‹ìœ¼ë¡œ ë‹¤ì´ì–´ê·¸ë¨ì„ ê·¸ë¦¬ëŠ” ë°©ì‹ì„ ì„ í˜¸í•©ë‹ˆë‹¤.

### Use Case Basics

- Actors: ì‹œìŠ¤í…œì˜ í–‰ìœ„ìê°€ ëˆ„êµ¬ì¸ì§€ (ëˆ„ê°€ ìœ ìŠ¤ì¼€ì´ìŠ¤ë¥¼ ì‹¤í–‰í•˜ëŠ”ì§€)
- Command or Query: ìœ ìŠ¤ì¼€ì´ìŠ¤ëŠ” ëª…ë ¹ ë˜ëŠ” ì¡°íšŒ ì¤‘ í•˜ë‚˜ë¼ëŠ” ì 
- Subdomain: ìœ ìŠ¤ì¼€ì´ìŠ¤ëŠ” íŠ¹ì • ì„œë¸Œë„ë©”ì¸ì— ì†í•˜ë©°, ì´ëŠ” ë³„ë„ì˜ ê²½ê³„ ì»¨í…ìŠ¤íŠ¸ë¡œ ë°°í¬ë  ìˆ˜ ìˆë‹¤ëŠ” ì 

#### 1. Actors

ëª¨ë“  í–‰ìœ„ìë¥¼ User(ì‚¬ìš©ì)ë¼ê³  ë¶€ë¥´ê¸° ì‰½ì§€ë§Œ, ì´ëŠ” ë„ë©”ì¸ì— ëŒ€í•´ ì¶©ë¶„íˆ ì„¤ëª…í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, ë‹¤ìŒê³¼ ê°™ì€ ë„ë©”ì¸ì— ë”°ë¼ ë‹¤ì–‘í•œ ìš©ì–´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

- ê²°ì œ ì‹œìŠ¤í…œ: ê³ ê°(Customer), êµ¬ë…ì(Subscriber), íšŒê³„ì‚¬(Accountant), ì¶œë‚©ì›(Treasurer), ì§ì›(Employee)
- ë¸”ë¡œê¹… ì‹œìŠ¤í…œ: í¸ì§‘ì(Editor), ë¦¬ë·°ì–´(Reviewer), ë°©ë¬¸ì(Guest), ì‘ì„±ì(Author)
- ì±„ìš© í”Œë«í¼: êµ¬ì§ì(JobSeeker), ê³ ìš©ì£¼(Employer), ë©´ì ‘ê´€(Interviewer), ì±„ìš©ì(Recruiter)
- ë°”ì´ë‹ ê±°ë˜ ì• í”Œë¦¬ì¼€ì´ì…˜: ê±°ë˜ì(Trader), ê´€ë¦¬ì(Admin)
- ì´ë©”ì¼ ë§ˆì¼€íŒ… íšŒì‚¬: ì—°ë½ì²˜(Contact), ìˆ˜ì‹ ì(Recipient), ë°œì‹ ì(Sender), ëª©ë¡ ì†Œìœ ì(ListOwner)

#### 2.Use Cases are Commands and Queries

ìœ ìŠ¤ì¼€ì´ìŠ¤ëŠ” ëª…ë ¹ ë˜ëŠ” ì¡°íšŒë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê°ì²´ ì§€í–¥ ì„¤ê³„ ì›ì¹™ ì¤‘ í•˜ë‚˜ì¸ CQS(ëª…ë ¹-ì¡°íšŒ ë¶„ë¦¬)ë¥¼ ë”°ë¥´ê²Œ ë˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¶€ì‘ìš©ì„ ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆìœ¼ë©°, ë²„ê·¸ë¥¼ ì¤„ì´ê³  ê°€ë…ì„±ì„ ë†’ì´ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.
ì˜ˆë¥¼ ë“¤ì–´, ë°”ì´ë‹ ê±°ë˜ ì•±ì¸ "White Label"ì—ì„œ ëª…ë ¹ì˜ ì˜ˆë¡œëŠ” AddVinylToWishlist(ìœ„ì‹œë¦¬ìŠ¤íŠ¸ì— ë°”ì´ë‹ ì¶”ê°€)ê°€ ìˆê³ , ì¡°íšŒì˜ ì˜ˆë¡œëŠ” GetWishlist(ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°)ê°€ ìˆìŠµë‹ˆë‹¤.
CQSì—ì„œ ëª…ë ¹(COMMANDS)ì€ ì‹œìŠ¤í…œì„ ë³€ê²½í•˜ì§€ë§Œ ê°’ì„ ë°˜í™˜í•˜ì§€ ì•Šìœ¼ë©°, ì¡°íšŒ(QUERIES)ëŠ” ì‹œìŠ¤í…œì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ì§€ë§Œ ë¶€ì‘ìš©ì´ ì—†ìŠµë‹ˆë‹¤.

#### 3. Use cases belong to a particular subdomain

ì¼ë°˜ì ìœ¼ë¡œ ëŒ€ë¶€ë¶„ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì—¬ëŸ¬ ì„œë¸Œë„ë©”ì¸ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤.
ì„œë¸Œë„ë©”ì¸ì€ ì „ì²´ ë¬¸ì œ ë„ë©”ì¸ì˜ ë…¼ë¦¬ì  ë¶„í• ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, ë°”ì´ë‹ ê±°ë˜ ì•± "White Label"ì€ ë°”ì´ë‹ì„ ê±°ë˜í•˜ëŠ” ê²ƒë¿ë§Œ ì•„ë‹ˆë¼ ì‹ ì› ë° ì ‘ê·¼ ê´€ë¦¬, í•­ëª© ì¹´íƒˆë¡œê¹…, ê²°ì œ, ì•Œë¦¼ ë“± ë‹¤ì–‘í•œ ì„œë¸Œë„ë©”ì¸ë„ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.

ì´ëŠ” [Conway](https://khalilstemmler.com/wiki/conways-law/)ì˜ ë²•ì¹™ê³¼ë„ ê´€ë ¨ì´ ìˆìœ¼ë©°, ì´ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

"ì‹œìŠ¤í…œì„ ì„¤ê³„í•˜ëŠ” ì¡°ì§ì€ í•´ë‹¹ ì¡°ì§ì˜ ì˜ì‚¬ì†Œí†µ êµ¬ì¡°ë¥¼ ë³µì‚¬í•œ ì„¤ê³„ë¥¼ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤."

Conwayì˜ ë²•ì¹™ì€ ì„œë¸Œë„ë©”ì¸ì„ ê²°ì •í•˜ê³  í–¥í›„ ìœ ìŠ¤ì¼€ì´ìŠ¤ë¥¼ ì‰½ê²Œ ë³€ê²½í•  ìˆ˜ ìˆë„ë¡ ë•ëŠ” ë° ìœ ìš©í•©ë‹ˆë‹¤.

ëŒ€ê·œëª¨ ë‹¨ì¼ì²´(monolithic) ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ì„œë¸Œë„ë©”ì¸ì„ í´ë”ë³„ë¡œ ë¶„ë¦¬í•˜ëŠ” ê²ƒì´ ê°€ë…ì„±ì„ ë†’ì´ë©°, ì¶”í›„ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë…ë¦½ì ìœ¼ë¡œ ë°°í¬ ê°€ëŠ¥í•œ ë‹¨ìœ„ë¡œ ë¶„ë¦¬ë˜ëŠ” ë° í•„ìˆ˜ì ì…ë‹ˆë‹¤.

### We discover use cases through conversation

ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì˜ ì˜¤í•´ ì¤‘ í•˜ë‚˜ëŠ” ê°œë°œìê°€ ì‚¬ëŒë“¤ê³¼ ëŒ€í™” ì—†ì´ ì½”ë“œë§Œ ì‘ì„±í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.

ì‹¤ì œ ê°œë°œì—ì„œëŠ” ì˜¬ë°”ë¥¸ ì–¸ì–´ë¥¼ ì‹ë³„í•˜ê³  ì‹¤ì œ ëª¨ë¸ì„ ì†Œí”„íŠ¸ì›¨ì–´ë¡œ êµ¬í˜„í•˜ëŠ” ì‘ì—…ì´ ë§ìŠµë‹ˆë‹¤.

ë‹¤ìŒì€ White Labelì˜ ìœ ìŠ¤ì¼€ì´ìŠ¤ë¥¼ ë°œê²¬í•˜ëŠ” ëŒ€í™” ì˜ˆì‹œì…ë‹ˆë‹¤.

> "ì•±ì— ëŒ€í•œ ì•„ì´ë””ì–´ê°€ ìˆì–´ìš”. ì‚¬ëŒë“¤ì´ ë‹¤ë¥¸ ì‚¬ëŒë“¤ê³¼ ë°”ì´ë‹ì„ ê±°ë˜í•  ìˆ˜ ìˆëŠ” ì•±ì´ì—ìš”."
>
> "ì˜¤, ê·¸ëŸ¬ë©´ ë””ìŠ¤ì½”ê·¸ìŠ¤(Discogs) ê°™ì€ ê±´ê°€ìš”?"
>
> "ë„¤, ë¹„ìŠ·í•´ìš”. í•˜ì§€ë§Œ ì˜¤ë¡œì§€ ë°”ì´ë‹ë§Œ ê±°ë˜í•´ìš”. ì§„ì •í•œ í™ìŠ¤í„°ë“¤ì„ ìœ„í•´ì„œì£ ."
>
> "ì¢‹ë„¤ìš”. ì œ ë°”ì´ë‹ì„ ê±°ë˜í•˜ê³  ì‹¶ì§€ ì•Šë‹¤ë©´, ê·¸ëƒ¥ êµ¬ë§¤í•  ìˆ˜ë„ ìˆë‚˜ìš”?"
>
> "ë„¤, ë³¸ì¸ì˜ ë°”ì´ë‹ì„ ë‹¤ë¥¸ ì‚¬ëŒì˜ ê²ƒê³¼ êµí™˜í•˜ê±°ë‚˜ ëˆìœ¼ë¡œ ê±°ë˜í•  ìˆ˜ ìˆì–´ìš”."

> "ë„¤, ë³¸ì¸ì˜ ë°”ì´ë‹ì„ ë‹¤ë¥¸ ì‚¬ëŒì˜ ê²ƒê³¼ êµí™˜í•˜ê±°ë‚˜ ëˆìœ¼ë¡œ ê±°ë˜í•  ìˆ˜ ìˆëŠ” ê±°ì£ ."
>
> "ê·¸ëŸ¼ ì´ê±´ ì–´ë•Œìš”? ì‚¬ìš©ìë“¤ì´ ë³µì¡í•œ ì œì•ˆì„ í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ê±°ì£ . ì˜ˆë¥¼ ë“¤ì–´, 'ì´ 2ê°œì˜ ë””ë³´ ì•¨ë²”ê³¼ ì„¹ìŠ¤ í”¼ìŠ¤í†¨ì¦ˆ ì•¨ë²”, ê·¸ë¦¬ê³  60ë‹¬ëŸ¬ë¥¼ ì¤„ í…Œë‹ˆ ê·¸ í•œì •íŒ ë²„ìŠ¤ë°ì´ íŒŒí‹° ë°”ì´ë‹ì„ ì£¼ë¼' ê°™ì€ ì‹ìœ¼ë¡œìš”."
>
> "ì•„, ê·¸ë ‡êµ°ìš”. ê·¸ëŸ¬ë‹ˆê¹Œ ì œì•ˆê³¼ ê±°ë˜ê°€ ìˆëŠ” ê±°ì£ . ì œì•ˆì—ëŠ” ì—¬ëŸ¬ ë ˆì½”ë“œì™€ ëˆì´ í¬í•¨ë  ìˆ˜ ìˆê³ , í•œ ê°œ ì´ìƒì˜ ë ˆì½”ë“œì™€ êµí™˜ì´ ê°€ëŠ¥í•œ ê±°ê³ ìš”. ê·¸ë¦¬ê³  ì œì•ˆì„ ë°›ì€ ì‚¬ëŒì€ ì´ë¥¼ ìˆ˜ë½í•˜ê±°ë‚˜ ê±°ì ˆí•  ìˆ˜ ìˆëŠ” ê±°êµ°ìš”."
>
> "ë„¤, ê·¸ê²Œ ì •í™•í•©ë‹ˆë‹¤. ë§Œì•½ ê±°ì ˆí•˜ê³  ì‹¶ë‹¤ë©´, 'ì½”ë©˜íŠ¸ë¥¼ ë‚¨ê¸°ë©°' ê±°ì ˆí•˜ëŠ” ê¸°ëŠ¥ì„ í†µí•´ ì™œ ê±°ì ˆí•˜ëŠ”ì§€ ì´ìœ ë¥¼ ì„¤ëª…í•˜ê³  ë‹¤ë¥¸ ì œì•ˆì„ í•˜ë„ë¡ ìœ ë„í•  ìˆ˜ë„ ìˆì„ ê±°ì—ìš”."

> "ì¢‹ì•„ìš”, ê´œì°®ë„¤ìš”."
>
> "ì, ê·¸ëŸ¼ ì§€ê¸ˆê¹Œì§€ ìš°ë¦¬ê°€ ë°œê²¬í•œ ìœ ìŠ¤ì¼€ì´ìŠ¤ëŠ” ë­ê°€ ìˆì„ê¹Œìš”?"

```plaintext
MakeOffer(offer: Offer)
DeclineOffer(offerId: OfferId, comments?: string)
AcceptOffer(offerId: OfferId)
```

> "ì•„ë§ˆë„ ëª¨ë“  ì œì•ˆì„ ê°€ì ¸ì˜¤ê±°ë‚˜ íŠ¹ì • IDë¡œ ì œì•ˆì„ ì¡°íšŒí•˜ëŠ” ê¸°ëŠ¥ë„ í•„ìš”í•  ê±°ì—ìš”. UIë„ ê³ ë ¤í•´ì•¼ í•  í…Œë‹ˆ, ì´ëŸ° ìœ ìŠ¤ì¼€ì´ìŠ¤ê°€ í•„ìš”í•  ê±°ì—ìš”."
>
> "ì•„, ê·¸ë ‡ì£ . ê·¸ëŸ¬ë©´ `GetAllOffers(userId: User)`ì™€ `GetOfferById(offerId: OfferId)`ë„ í•„ìš”í•˜ê² ë„¤ìš”."

> "ìŒ, ê·¸ëŸ°ë° ì—¬ê¸°ì„œ `User`ê°€ ì–´ë””ì„œ ë‚˜ì˜¨ ê±°ì£ ?"
>
> "ìš°ë¦¬ê°€ ì´ì•¼ê¸°í•œ ê²Œ ë°”ë¡œ ì‚¬ìš©ìë“¤ì´ í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ë“¤ì´ì–ì•„ìš”."
>
> "ë§ì•„ìš”, í•˜ì§€ë§Œ ì¡°ê¸ˆ ë‹¤ë¥´ê²Œ ìƒê°í•´ ë´…ì‹œë‹¤. ì´ ê±°ë˜ ì„œë¸Œë„ë©”ì¸ê³¼ ê·¸ ì—­í• ì„ ê³ ë ¤í•  ë•Œ, 'User'ë³´ë‹¤ëŠ” 'Trader'ë‚˜ 'RecordCollector'ë¼ê³  ë¶€ë¥´ëŠ” ê²Œ ë” ì ì ˆí•´ ë³´ì´ì§€ ì•Šë‚˜ìš”?"

> "ì•„, ì•Œê² ì–´ìš”. 'User'ë¼ëŠ” ìš©ì–´ëŠ” 'Users & Identity' ì„œë¸Œë„ë©”ì¸ì— ë” ì í•©í•˜ê³ , ì§€ê¸ˆ ìš°ë¦¬ê°€ ë…¼ì˜í•˜ëŠ” 'Trading' ì„œë¸Œë„ë©”ì¸ì—ëŠ” ë§ì§€ ì•ŠëŠ” ê²ƒ ê°™ë„¤ìš”, ë§ì£ ?"
>
> "ë„¤, ë§ìŠµë‹ˆë‹¤."
>
> "ì¢‹ì•„ìš”, ê·¸ëŸ¼ 'Trader'ë¡œ ê°‘ì‹œë‹¤."
>
> "ì¢‹ìŠµë‹ˆë‹¤. ì§€ê¸ˆê¹Œì§€ Trading ì„œë¸Œë„ë©”ì¸ì—ì„œ ìš°ë¦¬ê°€ ë°œê²¬í•œ ìœ ìŠ¤ì¼€ì´ìŠ¤ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

- MakeOffer(offer: Offer)
- DeclineOffer(offerId: OfferId, comments?: string)
- AcceptOffer(offerId: OfferId)
- GetAllOffers(traderId: TraderId)
- GetOfferById(offerId: offerId)

> "ê·¸ ë°–ì— ë‹¤ë¥¸ ê±´ ìƒê°ë‚˜ëŠ” ê²Œ ì—†ë„¤ìš”."
>
> "ì €ë„ ë”ëŠ” ì—†ì–´ìš”. ì¼ë‹¨ ì´ ì •ë„ë¡œ ì§„í–‰í•´ ë´…ì‹œë‹¤."

> "ê·¸ë¦¬ê³  ìš°ë¦¬ê°€ ëª‡ ê°€ì§€ ì—”í‹°í‹°ë„ íŒŒì•…í•œ ê²ƒ ê°™ë„¤ìš”. Offerì™€ Traderê°€ ê·¸ë ‡ì£ ?"
>
> "ë„¤, OfferëŠ” ì•„ë§ˆ OfferItemsì˜ ì• ê·¸ë¦¬ê²Œì´íŠ¸ ë£¨íŠ¸ê°€ ë  ê±°ì—ìš”. (ëˆê³¼ ë°”ì´ë‹ì„ í¬í•¨í•˜ëŠ” ì»¬ë ‰ì…˜) ê·¸ ë¶€ë¶„ì€ ë‚˜ì¤‘ì— ë” êµ¬ì²´í™”í•˜ë©´ ë  ê²ƒ ê°™ì•„ìš”. ì§€ê¸ˆê¹Œì§€ëŠ” ê´œì°®ì•„ ë³´ì—¬ìš”."
>
> "ì•„, ê·¸ë¦¬ê³  Users & Identity ì„œë¸Œë„ë©”ì¸ì„ ì–¸ê¸‰í–ˆìœ¼ë‹ˆ ê·¸ê²ƒë„ ë‹¤ë£°ê¹Œìš”?"
>
> "ìŒ, ë„¤- ê·¸ë ‡ê²Œ í•´ë„ ì¢‹ì„ ê²ƒ ê°™ì•„ìš”. ì•„ë§ˆ ë‹¤ë¥¸ ì•±ê³¼ ë¹„ìŠ·í•  ê±°ì—ìš”."
>
> "ë¬´ìŠ¨ ì˜ë¯¸ì£ ?"
>
> "ë³´í†µ ì´ëŸ° ê²½ìš°ì—” ê³µí†µì ì¸ ìœ ìŠ¤ì¼€ì´ìŠ¤ê°€ ìˆì–ì•„ìš”. ì˜ˆë¥¼ ë“¤ì–´:

- login(userEmail: UserEmail, password: UserPassword)
- logout(authToken: JWTToken)
- verifyEmail(emailVerificationToken: EmailVerificationToken)
- changePassword(passwordResetToken: Token, password: UserPassword)

> "ì´ëŸ° ì‹ì´ì£ . ì´ëŸ° ê¸°ëŠ¥ë“¤ì€ ë§ì´ êµ¬í˜„í•´ ë´¤ì–ì•„ìš”."
>
> "ì•„, ì´ê±° ìš°ë¦¬ê°€ ì•„ì›ƒì†Œì‹±í•  ìˆ˜ ìˆì§€ ì•Šì„ê¹Œìš”?"
>
> "ë„¤, ì•„ë§ˆ Auth0 ê°™ì€ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•´ ë³¼ ìˆ˜ ìˆì„ ê±°ì—ìš”."
>
> "DDD ìš©ì–´ë¡œ ì´ëŸ° ê±¸ ë­ë¼ê³  í•˜ì£ ? ì„œë¸Œë„ë©”ì¸ ìœ í˜•ì´..."

> "ì œë„¤ë¦­ ì„œë¸Œë„ë©”ì¸(generic subdomain)ì´ë¼ê³  í•˜ì£ ."
>
> "ê·¸ê²Œ ë¬´ìŠ¨ ëœ»ì´ì£ ?"

> "ë¹„ì¦ˆë‹ˆìŠ¤ì—ì„œ ì¤‘ìš”í•œ ë¶€ë¶„ì´ê¸´ í•˜ì§€ë§Œ, ì‚¬ì—…ì˜ í•µì‹¬ì€ ì•„ë‹ˆë¼ëŠ” ëœ»ì´ì—ìš”. í•µì‹¬ì€ ì•„ë§ˆë„ Trading ì„œë¸Œë„ë©”ì¸ì´ ë  ê±°ì—ìš”."
>
> "ë§ì•„ìš”. ê·¸ê²ƒì´ í•µì‹¬ ì„œë¸Œë„ë©”ì¸ì´ ë  ê±°ì—ìš”. ì™œëƒí•˜ë©´, ê·¸ê²ƒì´ ë°”ë¡œ ìš°ë¦¬ì˜ ì•±ì—ì„œ ì•„ì›ƒì†Œì‹±í•˜ê±°ë‚˜ ê¸°ì¡´ì˜ íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ë…íŠ¹í•œ ë¶€ë¶„ì´ê¸° ë•Œë¬¸ì´ì£ ."

ì´ë ‡ê²Œ ëŒ€í™”ë¥¼ í†µí•´ MakeOffer, DeclineOffer, AcceptOffer ë“±ì˜ ìœ ìŠ¤ì¼€ì´ìŠ¤ë¥¼ íŒŒì•…í•´ ë‚˜ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ìœ ìŠ¤ì¼€ì´ìŠ¤ ì„¤ê³„ë¥¼ í†µí•´ ì„œë¸Œë„ë©”ì¸ì˜ ì—­í• ì„ ë” ì˜ ì´í•´í•  ìˆ˜ ìˆìœ¼ë©°, ê¸°ëŠ¥ì„ ì˜ ì •ì˜í•˜ê³  ì¡°ì§í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.

## 2. The Role of the Application Layer

Enterprise Node.js + TypeScript ì‹œë¦¬ì¦ˆë¥¼ ë”°ë¼ì˜¤ì…¨ë‹¤ë©´, ë„ë©”ì¸ ê³„ì¸µ(Domain Layer)ì€ ëª¨ë“  ì—”í„°í‹°ì™€ ê°’ ê°ì²´ë¥¼ í¬í•¨í•˜ë©°, ì™¸ë¶€ ê³„ì¸µì— ì˜ì¡´í•˜ì§€ ì•Šê³ , ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§(íŠ¹íˆ íŠ¹ì • ì—”í„°í‹°ì™€ ê´€ë ¨ëœ ë¡œì§)ì„ ê°€ì¥ ë¨¼ì € ë°°ì¹˜í•˜ëŠ” ê³„ì¸µì´ë¼ëŠ” ê²ƒì„ ê¸°ì–µí•˜ì‹¤ ê²ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, White Labelì—ì„œ Vinylì´ ìµœëŒ€ 3ê°œì˜ ë‹¤ë¥¸ ì¥ë¥´ë§Œ ê°€ì§ˆ ìˆ˜ ìˆë„ë¡ ë³´ì¥í•˜ëŠ” ë¶ˆë³€ ë¡œì§ì„ ì–´ë””ì— ë°°ì¹˜í•´ì•¼ í• ì§€ ê³ ë¯¼í•œë‹¤ë©´, ì´ ë¡œì§ì€ Vinyl í´ë˜ìŠ¤(ì• ê·¸ë¦¬ê²Œì´íŠ¸ ë£¨íŠ¸)ì— í¬í•¨ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

```ts
class Vinyl extends AggregateRoot<VinylProps> {
  ...

  addGenre (genre: Genre): Result<any> {
    if (this.props.genres.length >= MAX_NUMBER_OF_GENRES_PER_VINYL) {
      return Result.fail<any>('Max number of genres reached')
    }

    if (!this.genreAlreadyExists(genre)) {
      this.props.genres.push(genre)
    }

    return Result.ok<any>();
  }
}
```

ìœ„ì˜ ì½”ë“œì—ì„œ ìš°ë¦¬ëŠ” ë„ë©”ì¸ ëª¨ë¸ ìì²´ì— ê²€ì¦ ë¡œì§ì„ ë°°ì¹˜í•¨ìœ¼ë¡œì¨ ë„ë©”ì¸ ëª¨ë¸ì˜ ë¬´ê²°ì„±ì„ ë³´ì¥í•˜ê³  ìˆìŠµë‹ˆë‹¤.

Vinylì€ Catalog ì„œë¸Œë„ë©”ì¸ì˜ ë„ë©”ì¸ ê³„ì¸µì—ì„œ ë§ì€ ë„ë©”ì¸ ëª¨ë¸ ì¤‘ í•˜ë‚˜ì— ë¶ˆê³¼í•©ë‹ˆë‹¤.

> ë„ë©”ì¸ ê³„ì¸µê³¼ ì¸í”„ë¼ ê³„ì¸µ ë³µìŠµ
>
> - ë„ë©”ì¸ ê³„ì¸µ: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ í¬í•¨í•˜ê³ , ì™¸ë¶€ ê³„ì¸µì— ì˜ì¡´í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
> - ì¸í”„ë¼ ê³„ì¸µ: ì»¨íŠ¸ë¡¤ëŸ¬, ë°ì´í„°ë² ì´ìŠ¤, ìºì‹œ ë“± ì™¸ë¶€ ì„œë¹„ìŠ¤ì™€ ê´€ë ¨ëœ ìš”ì†Œë¥¼ í¬í•¨í•©ë‹ˆë‹¤.

ì• í”Œë¦¬ì¼€ì´ì…˜ ê³„ì¸µì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ íŠ¹ì • ì„œë¸Œë„ë©”ì¸ì— ëŒ€í•œ ìœ ìŠ¤ì¼€ì´ìŠ¤ë¥¼ í¬í•¨í•©ë‹ˆë‹¤.

ìœ ìŠ¤ì¼€ì´ìŠ¤ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê¸°ëŠ¥ì„ ì„¤ëª…í•˜ë©°, ë…ë¦½ì ìœ¼ë¡œ ë°°í¬ë˜ê±°ë‚˜ ëª¨ë†€ë¦¬ì‹ í˜•íƒœë¡œ ë°°í¬ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìœ ìŠ¤ì¼€ì´ìŠ¤ë¥¼ ì„œë¸Œë„ë©”ì¸ì— ì§ì ‘ í¬í•¨í•˜ë©´ í•´ë‹¹ ì„œë¸Œë„ë©”ì¸ì˜ ê¸°ëŠ¥ì„ ë°”ë¡œ ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. DDD ìš©ì–´ë¡œ, ìœ ìŠ¤ì¼€ì´ìŠ¤ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. **ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë¹„ìŠ¤ëŠ” ë„ë©”ì¸ ë¡œì§ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ë„ë©”ì¸ ì—”í„°í‹°ì™€ ì •ë³´ë¥¼ ê²€ìƒ‰í•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.**

ì˜ˆë¥¼ ë“¤ì–´, AcceptOffer(offerId: OfferId) ìœ ìŠ¤ì¼€ì´ìŠ¤ë¥¼ ê³ ë ¤í•´ ë´…ì‹œë‹¤.

ì´ ìœ ìŠ¤ì¼€ì´ìŠ¤ì—ì„œëŠ” OfferIdë§Œ ê°€ì§€ê³  ì‹œì‘í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ, ë‹¨ìˆœíˆ OfferIdë§Œìœ¼ë¡œëŠ” accept ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. OfferIdë¥¼ í†µí•´ ì „ì²´ Offer ì—”í„°í‹°ë¥¼ ê°€ì ¸ì™€ì•¼ í•©ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ offer.accept()ë¥¼ ì €ì¥í•˜ê³ , OfferAcceptedEventë¼ëŠ” ë„ë©”ì¸ ì´ë²¤íŠ¸ë¥¼ ë””ìŠ¤íŒ¨ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤. Offer ì—”í„°í‹°ë¥¼ ê²€ìƒ‰í•˜ê³  ì €ì¥í•˜ê¸° ìœ„í•´ ë¦¬í¬ì§€í† ë¦¬ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë¹„ìŠ¤ëŠ” ë„ë©”ì¸ ì—”í„°í‹°ë¥¼ ê²€ìƒ‰í•˜ê³  ì‹¤í–‰ í™˜ê²½ì„ ì„¤ì •í•˜ëŠ” ì±…ì„ì„ ê°–ìŠµë‹ˆë‹¤.

í”„ë¡œì íŠ¸ë¥¼ ìœ ìŠ¤ì¼€ì´ìŠ¤ ì¤‘ì‹¬ìœ¼ë¡œ êµ¬ì¡°í™”í•˜ëŠ” ë°©ë²•ì„ ì•„ë˜ì—ì„œ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ ê³„ì¸µì€ ìœ ìŠ¤ì¼€ì´ìŠ¤ë¥¼ í¬í•¨í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê¸°ëŠ¥ì„ ëª…í™•íˆ ì •ì˜í•˜ê³  ì„œë¸Œë„ë©”ì¸ ê°„ì˜ ì±…ì„ì„ ë¶„ë¦¬í•©ë‹ˆë‹¤. ğŸ˜Š

## 3. í”„ë¡œì íŠ¸ êµ¬ì¡°í™” ì˜ˆì‹œ

ë¡œë²„íŠ¸ ë§ˆí‹´(ì¼ëª… Uncle Bob)ì€ **"Screaming Architecture"**ë¼ëŠ” íŒ¨í„´ì„ ì œì•ˆí–ˆìŠµë‹ˆë‹¤.
ì´ íŒ¨í„´ì€ í”„ë¡œì íŠ¸ì˜ êµ¬ì¡°ë§Œ ë³´ì•„ë„ ìš°ë¦¬ê°€ ì–´ë–¤ í”„ë¡œì íŠ¸ë¥¼ ì‘ì—…í•˜ê³  ìˆëŠ”ì§€, ê·¸ë¦¬ê³  ì‹œìŠ¤í…œì˜ ê¸°ëŠ¥ì´ ë¬´ì—‡ì¸ì§€ê°€ ëª…í™•íˆ ë“œëŸ¬ë‚˜ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

White Label í”„ë¡œì íŠ¸ì—ì„œ ì„œë¸Œë„ë©”ì¸ => ìœ ìŠ¤ì¼€ì´ìŠ¤ + ì—”í„°í‹° êµ¬ì¡°ë¡œ ë‚˜ëˆ„ì—ˆì„ ë•Œì˜ ì˜ˆì‹œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

í”„ë¡œì íŠ¸ êµ¬ì¡°ë¥¼ ë³´ë©´ Users ì„œë¸Œë„ë©”ì¸ì´ ë¬´ì—‡ì¸ì§€, ì–´ë–¤ ê¸°ëŠ¥ì„ í•˜ëŠ”ì§€, ê·¸ë¦¬ê³  Catalog ì„œë¸Œë„ë©”ì¸ì˜ ì—­í• ì´ ë¬´ì—‡ì¸ì§€ ë°”ë¡œ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## 4. A Use Case interface

ìœ ìŠ¤ì¼€ì´ìŠ¤ëŠ” ì›ì¹™ì ìœ¼ë¡œ ë‹¨ìˆœí•©ë‹ˆë‹¤. **ìš”ì²­(request)**ê³¼ **ì‘ë‹µ(response)**ì´ ì˜µì…˜ìœ¼ë¡œ í¬í•¨ë©ë‹ˆë‹¤.

```ts
export interface UseCase<IRequest, IResponse> {
  execute(request?: IRequest): Promise<IResponse> | IResponse;
}
```

"í•­ìƒ êµ¬í˜„ì´ ì•„ë‹Œ ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•´ì„œ í”„ë¡œê·¸ë˜ë°í•´ì•¼ í•œë‹¤"ëŠ” ì„¤ê³„ ì›ì¹™ì„ ì ìš©í•˜ì—¬, ìœ„ì™€ ê°™ì´ ìœ ìŠ¤ì¼€ì´ìŠ¤ë¥¼ í‘œí˜„í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ë‹¨ìˆœí•˜ë©´ì„œë„ íš¨ê³¼ì ì´ì£ .

## 5. Implementing a Use Case

ì´ì œ ìœ ìŠ¤ì¼€ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ë´…ì‹œë‹¤. AddVinylToCatalogUseCaseë¥¼ Catalog ì„œë¸Œë„ë©”ì¸ì—ì„œ êµ¬í˜„í•´ ë³´ê² ìŠµë‹ˆë‹¤.

ë¨¼ì €, í´ë˜ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ì œë„¤ë¦­ DTO(ë°ì´í„° ì „ì†¡ ê°ì²´)ë¡œ anyë¥¼ ì‚¬ìš©í•˜ì—¬ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.

```ts
export class AddVinylToCatalogUseCase implements UseCase<any, any> {
  public async execute(request: any): Promise<any> {
    return null;
  }
}
```

Vinylì„ ì¶”ê°€í•˜ë ¤ë©´, ì´ë¥¼ ìƒì„±í•˜ëŠ” ë° í•„ìš”í•œ ëª¨ë“  ì •ë³´ì™€ í•¨ê»˜ ì¶”ê°€í•  Traderì˜ idë¥¼ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤.
ì´ ì •ë³´ë¥¼ ìš”ì²­ DTOì— ë‹´ì•„ë³´ê² ìŠµë‹ˆë‹¤.

```ts
interface AddVinylToCatalogUseCaseRequestDTO {
  vinylName: string;
  artistNameOrId: string;
  traderId: string;
  genresArray?: string | string[];
}

export class AddVinylToCatalogUseCase
  implements UseCase<AddVinylToCatalogUseCaseRequestDTO, any>
{
  async execute(request: AddVinylToCatalogUseCaseRequestDTO): Promise<any> {
    return null;
  }
}
```

### ì˜ì¡´ì„± ì£¼ì…ì„ í†µí•œ ë¦¬í¬ì§€í† ë¦¬ ì—°ê²°

Vinyl ì• ê·¸ë¦¬ê²Œì´íŠ¸ ë£¨íŠ¸ í´ë˜ìŠ¤ëŠ” Artistì˜ ì‹¤ì œ ì¸ìŠ¤í„´ìŠ¤ê°€ í•„ìš”í•©ë‹ˆë‹¤.

ìš”ì²­ì—ì„œ ì œê³µëœ artistNameOrIdê°€ IDì¸ì§€ ì´ë¦„ì¸ì§€ì— ë”°ë¼ ì ì ˆíˆ ê°€ì ¸ì™€ì•¼ í•©ë‹ˆë‹¤. ìš”ì²­ ì‹¤íŒ¨ ì‹œ ì•ˆì „í•˜ê²Œ ì˜¤ë¥˜ë¥¼ ë°˜í™˜í•˜ê¸° ìœ„í•´ Result í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì„±ê³µ ì‹œ VinylRepoë¥¼ ì‚¬ìš©í•˜ì—¬ Vinylì„ ì˜ì†í™”í•´ì•¼ í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ **ì˜ì¡´ì„± ì£¼ì…(DI)**ì„ ì‚¬ìš©í•´ VinylRepoì™€ ArtistRepoë¥¼ í´ë˜ìŠ¤ì˜ ìƒì„±ìì—ì„œ ì£¼ì…í•©ë‹ˆë‹¤.

```ts
interface AddVinylToCatalogUseCaseRequestDTO {
  vinylName: string;
  artistNameOrId: string;
  traderId: string;
  genresArray?: string | string[];
}

export class AddVinylToCatalogUseCase
  implements UseCase<AddVinylToCatalogUseCaseRequestDTO, Result<Vinyl>>
{
  private vinylRepo: IVinylRepo;
  private artistRepo: IArtistRepo;

  constructor(vinylRepo: IVinylRepo, artistRepo: IArtistRepo) {
    this.vinylRepo = vinylRepo;
    this.artistRepo = artistRepo;
  }

  public async execute(
    request: AddVinylToCatalogUseCaseRequestDTO
  ): Promise<Result<Vinyl>> {
    return null;
  }
}
```

ë‹¤ìŒìœ¼ë¡œ ìœ ìŠ¤ì¼€ì´ìŠ¤ ë¡œì§ì„ êµ¬í˜„í•©ë‹ˆë‹¤.

- Artist í™•ì¸ ë° ìƒì„±
  - ìš”ì²­ì—ì„œ ë°›ì€ artistNameOrIdê°€ UUIDì¸ì§€ ì´ë¦„ì¸ì§€ í™•ì¸ í›„ ì ì ˆíˆ ì²˜ë¦¬í•©ë‹ˆë‹¤.
- Vinyl ìƒì„±
  - Vinyl.create() ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ Vinyl ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
- Vinyl ì €ì¥
  - ìƒì„±ëœ Vinyl ê°ì²´ë¥¼ VinylRepo.save()ë¥¼ í†µí•´ ì˜ì†í™”í•©ë‹ˆë‹¤.

```ts
export interface AddVinylToCatalogUseCaseRequestDTO {
  vinylName: string;
  artistNameOrId: string;
  traderId: string;
  genresArray?: string | string[];
}

export class AddVinylToCatalogUseCase
  implements UseCase<AddVinylToCatalogUseCaseRequestDTO, Result<Vinyl>>
{
  private vinylRepo: IVinylRepo;
  private artistRepo: IArtistRepo;

  constructor(vinylRepo: IVinylRepo, artistRepo: IArtistRepo) {
    this.vinylRepo = vinylRepo;
    this.artistRepo = artistRepo;
  }

  public async execute(
    request: AddVinylToCatalogUseCaseRequestDTO
  ): Promise<Result<Vinyl>> {
    const { vinylName, artistNameOrId, traderId, genresArray } = request;
    let artist: Artist;

    const isArtistId = TextUtil.isUUID(artistNameOrId);

    if (isArtistId) {
      artist = await this.artistRepo.findById(artistNameOrId);
    } else {
      artist = await this.artistRepo.findByArtistName(artistNameOrId);
    }

    if (!!artist === false) {
      artist = Artist.create({
        name: ArtistName.create(artistNameOrId).getValue(),
        genres: [],
      }).getValue();
    }

    const vinylOrError = Vinyl.create({
      title: vinylName,
      artist: artist,
      traderId: TraderId.create(new UniqueEntityID(traderId)),
      genres: [],
    });

    if (vinylOrError.isFailure) {
      return Result.fail<Vinyl>(vinylOrError.error);
    }

    const vinyl = vinylOrError.getValue();

    await this.vinylRepo.save(vinyl);
    return Result.ok<Vinyl>(vinyl);
  }
}
```

## ìœ ìŠ¤ì¼€ì´ìŠ¤ëŠ” ì¸í”„ë¼ ê³„ì¸µì— ì¢…ì†ë˜ì§€ ì•ŠìŒ

ìœ ìŠ¤ì¼€ì´ìŠ¤ëŠ” ì–´ë–»ê²Œ ì—°ê²°ë˜ëŠ”ì§€ì™€ ë¬´ê´€í•©ë‹ˆë‹¤.

ì…ë ¥ê°’ë§Œ ì œê³µë˜ë©´, ì‹œìŠ¤í…œì—ì„œ ëª…ë ¹ê³¼ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì¦‰, ìœ ìŠ¤ì¼€ì´ìŠ¤ëŠ” Express.js ì»¨íŠ¸ë¡¤ëŸ¬ë‚˜ ì¸í”„ë¼ ê³„ì¸µì˜ ë‹¤ë¥¸ ì™¸ë¶€ ì„œë¹„ìŠ¤ë¡œ ì—°ê²°ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```ts
import { BaseController } from "../../../../../infra/http/BaseController";
import { AddVinylToCatalogUseCase } from "./CreateJobUseCase";
import { DecodedExpressRequest } from "../../../../../domain/types";
import { AddVinylToCatalogUseCaseRequestDTO } from "./AddVinylToCatalogUseCaseRequestDTO";

export class AddVinylToCatalogUseCaseController extends BaseController {
  private useCase: AddVinylToCatalogUseCase;

  public constructor(useCase: AddVinylToCatalogUseCase) {
    super();
    this.useCase = useCase;
  }

  public async executeImpl(): Promise<any> {
    const req = this.req as DecodedExpressRequest;
    const { traderId } = req.decoded;
    const requestDetails = req.body as AddVinylToCatalogUseCaseRequestDTO;
    const resultOrError = await this.useCase.execute({
      ...requestDetails,
      traderId,
    });
    if (resultOrError.isSuccess) {
      return this.ok(this.res, resultOrError.getValue());
    } else {
      return this.fail(resultOrError.error);
    }
  }
}
```

ë‹¤ë¥¸ ìœ ìŠ¤ì¼€ì´ìŠ¤ì™€ ì—°ê²°
**ìœ ìŠ¤ì¼€ì´ìŠ¤ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ê³„ì¸µ ë‚´ì—ì„œ ë‹¤ë¥¸ ìœ ìŠ¤ì¼€ì´ìŠ¤ì— ì˜í•´ ì‹¤í–‰ë  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.**
í•˜ì§€ë§Œ ë„ë©”ì¸ ê³„ì¸µì—ì„œëŠ” ì‹¤í–‰ë  ìˆ˜ ì—†ìŠµë‹ˆë‹¤(Uncle Bobì˜ ì˜ì¡´ì„± ê·œì¹™ì— ë”°ë¦„).

ì´ëŸ¬í•œ êµ¬ì¡°ëŠ” ë§¤ìš° ìœ ìš©í•˜ë©°, ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í™•ì¥í•˜ëŠ” ë° ìœ ì—°ì„±ì„ ì œê³µí•©ë‹ˆë‹¤.

ë„ë©”ì¸ ì´ë²¤íŠ¸ì™€ì˜ ìš°ì•„í•œ ìœ ìŠ¤ì¼€ì´ìŠ¤ ì‚¬ìš©
ìœ ìŠ¤ì¼€ì´ìŠ¤ë¥¼ ì²´ì¸ìœ¼ë¡œ ì—°ê²°í•˜ëŠ” ìš°ì•„í•œ ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤.

íŠ¹ì • ì´ë²¤íŠ¸ê°€ ë°œìƒí–ˆì„ ë•Œ, ë‹¤ë¥¸ ìœ ìŠ¤ì¼€ì´ìŠ¤ê°€ ì‹¤í–‰ë˜ë„ë¡ ì—°ê²°í•˜ê³  ì‹¶ì„ ë•Œ ì²´ì¸ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ë„ë©”ì¸ ì£¼ë„ ì„¤ê³„(DDD)ì—ì„œëŠ” ì´ë²¤íŠ¸ ìŠ¤í† ë°(Event Storming) ê¸°ë²•ì„ í†µí•´ ì´ëŸ¬í•œ ë™ì‘ì„ ì‹ë³„í•˜ê³ , ì˜µì €ë²„ íŒ¨í„´ì„ ì‚¬ìš©í•˜ì—¬ ë„ë©”ì¸ ì´ë²¤íŠ¸ë¥¼ ë°©ì¶œí•©ë‹ˆë‹¤.

## ìœ„ì‹œë¦¬ìŠ¤íŠ¸ì— ìˆëŠ” í•­ëª© ì¶”ê°€ ì‹œ íŠ¸ë ˆì´ë” ì•Œë¦¼

White Labelì—ì„œëŠ” íŠ¸ë ˆì´ë”ê°€ íŠ¹ì • ì•„í‹°ìŠ¤íŠ¸ë‚˜ ë°”ì´ë‹ì„ ìœ„ì‹œë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ëˆ„êµ°ê°€ ìƒˆë¡œìš´ ë°”ì´ë‹ì„ ì»¬ë ‰ì…˜ì— ì¶”ê°€í•˜ë©´, í•´ë‹¹ ì•„í‹°ìŠ¤íŠ¸ë‚˜ ë°”ì´ë‹ì— ê´€ì‹¬ì´ ìˆëŠ” íŠ¸ë ˆì´ë”ë“¤ì—ê²Œ ì•Œë¦¼ì´ ì „ì†¡ë©ë‹ˆë‹¤.
ì´ë¥¼ í†µí•´ íŠ¸ë ˆì´ë”ëŠ” ê´€ì‹¬ ìˆëŠ” ë°”ì´ë‹ì˜ ì†Œìœ ìì—ê²Œ ì œì•ˆì„ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë ˆì´ì–´ì™€ ìœ ìŠ¤ì¼€ì´ìŠ¤ ê°„ì˜ í†µì‹  ë‹¤ì´ì–´ê·¸ë¨
ë‹¤ìŒ ë‹¤ì´ì–´ê·¸ë¨ì€ ë ˆì´ì–´ì™€ ìœ ìŠ¤ì¼€ì´ìŠ¤ ê°„ì˜ í†µì‹ ì„ ë‹¨ìˆœí™”í•œ ì˜ˆì‹œì…ë‹ˆë‹¤.

ìœ ìŠ¤ì¼€ì´ìŠ¤ ê°„ì˜ ì²´ì¸ ì—°ê²°ì€ ì´ë²¤íŠ¸ ê¸°ë°˜ ì•Œë¦¼ê³¼ ê°™ì€ ë³µì¡í•œ ë™ì‘ì„ ì„¤ê³„í•  ë•Œ ë§¤ìš° ê°•ë ¥í•œ íŒ¨í„´ì„ ì œê³µí•©ë‹ˆë‹¤. ğŸ˜Š

### í™•ì¥ì„±ì„ ê³ ë ¤í•œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì „í™˜

ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ì—ì„œ ì‹¤í–‰ë˜ëŠ” ëª¨ë†€ë¦¬ì‹ êµ¬ì¡°ë¡œ ìœ ì§€í•˜ëŠ” ëŒ€ì‹ , ì„œë¸Œë„ë©”ì¸ì„ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¡œ ë°°í¬í•˜ê³  ì‹¶ë‹¤ë©´, RabbitMQë‚˜ Amazon MQì™€ ê°™ì€ ë©”ì‹œì§€ ë¸Œë¡œì»¤ë¥¼ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ë„ë©”ì¸ ì´ë²¤íŠ¸ì™€ ìœ ìŠ¤ì¼€ì´ìŠ¤ ì²´ì¸ì˜ ë¹„ë™ê¸° ì—°ê²°

í–¥í›„ ê¸°ì‚¬ì—ì„œ ì˜µì €ë²„ íŒ¨í„´ì„ ì‚¬ìš©í•˜ì—¬ ë„ë©”ì¸ ì´ë²¤íŠ¸ë¥¼ ì²´ì¸ìœ¼ë¡œ ì—°ê²°í•˜ê³ , ì´ë¥¼ í†µí•´ ìœ ìŠ¤ì¼€ì´ìŠ¤ë¥¼ ë””ì»¤í”Œë§ëœ ë°©ì‹ìœ¼ë¡œ ì‹¤í–‰í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ìì„¸íˆ ë‹¤ë£° ì˜ˆì •ì…ë‹ˆë‹¤.

ì½”ë“œë² ì´ìŠ¤
ì´ ê¸€ì— ì†Œê°œëœ ëª¨ë“  ì½”ë“œëŠ” White Labelì—ì„œ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤. White Labelì€ Node.jsì™€ TypeScriptë¥¼ ì‚¬ìš©í•´ ë„ë©”ì¸ ì£¼ë„ ì„¤ê³„(DDD) ë°©ì‹ìœ¼ë¡œ êµ¬ì¶•ëœ ë°”ì´ë‹ ê±°ë˜ ì—”í„°í”„ë¼ì´ì¦ˆ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.

---

- ì£¼ìš” í¬ì¸íŠ¸

  - CQSì—ì„œ ëª…ë ¹(COMMANDS)ì€ ì‹œìŠ¤í…œì„ ë³€ê²½í•˜ì§€ë§Œ ê°’ì„ ë°˜í™˜í•˜ì§€ ì•Šìœ¼ë©°, ì¡°íšŒ(QUERIES)ëŠ” ì‹œìŠ¤í…œì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ì§€ë§Œ ë¶€ì‘ìš©ì´ ì—†ìŠµë‹ˆë‹¤.
  - ìœ ìŠ¤ì¼€ì´ìŠ¤ì˜ 3ê°€ì§€ ê¸°ë³¸ ê°œë…: ëª…ë ¹, ì¡°íšŒ, ì„œë¸Œë„ë©”ì¸

- ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë¹„ìŠ¤ëŠ” ë„ë©”ì¸ ë¡œì§ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ë„ë©”ì¸ ì—”í„°í‹°ì™€ ì •ë³´ë¥¼ ê²€ìƒ‰í•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹í•œë‹¤.
