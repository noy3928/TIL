### 날짜 : 2022-11-14 23:39
### 주제 : 

---- 

### 메모 : 
- 프로미스는 비동기 상황에서 함수 합성을 안전하게 하기 위한 도구라고 할 수 있다. 
- 함수합성을 안전하게 하는 모나드라고 할 수 있다. 

- 모나드를 설명하기 위해서는 함수합성을 설명해야한다. 
	- 안전하게 합성할 수 있게 하기 위해서 모나드라는 것이 있다. 
	- 비동기 상황을 안전하게 합성하는 것이 프로미스라고 보면된다. 
- 모나드를 알고 있으면 좋은 사고나 응용력을 가질 수 있게 된다. 
	- 배열이나 프로미스를 통해서 모나드가 무엇인지 이해해볼 수 있다. 
	- 함수 합성에서의 안정성, 유연성을 살펴볼 수 있다. 
- 모나드는 하나의 박스라고 보면된다. 
	- 박스에 하나의 값이 들어있다. 
	- 이 값을 통해서 함수합성들을 안전하게 해나가는 것이라고 볼 수 있다. 


- 어떤 값이 들어올 지 모르는 상황에서 어떻게하면 함수합성을 안전하게 할 수 있을까? 
	- 그 값이 null일지, undefined일지 무엇일지 모르는 상황일 때, 어떻게 할 수 있는가? 
	- 이것을 위한 아이디어가 모나드라고 할 수 있다. 

- 모나드는 박스를 가지고 있고, 박스 안에 실제 연산에 필요한 값들을 가지고 있다. 
	- map이라는 메서드를 통해서 합성을 한다. 그리고 합성을 한 결과는 다시 체이닝할 수 있다. 
	- 배열이라는 값은 사실 필요한 값이 아니다. 
		- 이것은 어떤 효과를 위해서 사용하는 도구이지, 화면에 보여주는 실제 결론은 아니다. 이 값이 어떻게 변했는지 만이 중요한 것이다. 배열 자체로 화면에 출력하는 경우는 없다. 그 안에 있는 값을 가지고 우리는 무언가를 해야한다. 그래서 실제로 컨테이너 안에 있는 그 값이 실제로 무엇이냐가 중요한 것이다. 

```javascript
f(g(1))
f(g()) // 이 값은 Nan 같은 값이 출력된다. 안전하지 않은 합성이라고 할 수 있다.


[1].map(g).map(f).forEach(r => log(r));
[].map(g).map(f).forEach(r => log(r,10));  // 이건 애초에 실행이 안된다.
```
- 위 사례를 보면 안전하게 함수 합성을 하고 있다는 것을 볼 수 있다. 
- 배열 같은 경우는 안전하게 함수를 합성해서 값을 만들기 위한 특성을 가지고 있다. 


- 프로미스는 어떤 함수 합성을 하는 값인가? 

```javascript
Array.of(1).map(g).map(f).forEach(r => log(r)); // 프로미스와 비슷한 표현으로 바꿔보았다.
[].map(g).map(f).forEach(r => log(r,10));  

Promise.resolve(1).then(g).then(f).then(r => log(r)) // 배열과 완전히 동일한 표현을 하고 있다. 프로미스는 then을 통해서 함수를 합성한다.
```


- 프로미스는 값이 있거나, 없거나의 상황에서 안전하게 합성하려는 것이 아니라, 
	- 대기 상황, 성공 상황, 거절 상황에서의 안전한 합성을 진행하려는 것이다. 
	- 함수 합성 시점을 안전하게 만들기 위한 모나드인 것이다. 
- 프로미스도 결국에는 어떤 특정 상황에서 안전하게 함수를 합성하기 위한 것이다. 
- 모나드라는 개념이 무엇이냐, 정의가 무엇이냐에 너무 집중할 필요는 없다. 




### 내 생각과 정리 : 

- 배열도 모나드라고 말했다. 내가 함수형 자바스크립트 책에서 읽은 모나드의 정의는 다음과 같다. 어떤 값이 들어올지 모르는 상황 속에서 일련의 단계를 거쳐서, 계산을 수행하는 디자인 패턴. 값을 승급하고 그 값에 대해서 특정 규칙을 통해서 통제하는 방식으로 값을 다루는 자료형. 이라고 이해했다. 여기에 덧붙여 설명이 들어온 것은 함수자에서 안전하게 함수합성을 하기 위해서는 모나드가 필요하다고 말했던 것 같다. 
- 배열은 어떻게 모나드가 될 수 있는가? 배열이라는 구조 자체는 말 그대로 값을 감싸고 있는 것이다. 이것을 통해서 안전하게 함수 합성을 가능하게 만들어준다. 


### 출처(참고문헌) : 


### Link : 
