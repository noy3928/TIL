> https://www.pingcap.com/article/the-benefits-of-using-uuids-for-unique-identification/

# 번역 

시스템과 데이터베이스 영역에서 고유 식별은 데이터 무결성을 유지하고 원활한 운영을 보장하는 데 가장 중요합니다. 이러한 목적을 위한 가장 효과적인 도구 중 하나가 UUID(Universally Unique Identifier, 범용 고유 식별자)입니다. 그렇다면 UUID란 무엇일까요? 본질적으로 컴퓨터 시스템에서 정보를 고유하게 식별하는 데 사용되는 128비트 숫자입니다. 현대 애플리케이션에서 고유 식별자의 중요성은 아무리 강조해도 지나치지 않습니다. 이들은 데이터 동기화를 용이하게 하고, 분산 시스템을 가능하게 하며, 다양한 플랫폼에서 보안을 향상시킵니다.

## **UUID 이해하기**

### **UUID란 무엇인가?**

UUID, 즉 범용 고유 식별자(Universally Unique Identifier)는 컴퓨터 시스템에서 정보를 고유하게 식별하는 데 사용되는 128비트 숫자입니다. 일반적으로 하이픈으로 구분된 다섯 개 섹션으로 나뉜 36문자 문자열로 표시되며, 8-4-4-4-12 패턴을 따릅니다. 예를 들어, UUID는 다음과 같은 형태입니다: `bc2d0f53-5041-46e8-a14c-267875a49f0c`. 이러한 구조는 각 UUID가 서로 다른 시스템과 애플리케이션에서 고유함을 보장합니다.

UUID는 마이크로소프트가 만든 용어인 GUID(Globally Unique Identifiers, 전역 고유 식별자)로도 알려져 있습니다. GUID와 UUID는 유사한 목적을 제공하지만, GUID는 마이크로소프트의 표준을 따르는 반면, UUID는 RFC4122에서 정의한 개방형 인터넷 표준을 따릅니다.

### **UUID의 다양한 버전**

UUID에는 여러 버전이 있으며, 각각 특정 사용 사례를 위해 설계되었습니다:

1. **UUID 버전 1**: 타임스탬프와 생성 장치의 MAC 주소를 포함하는 시간 기반 UUID입니다. 이 버전은 분산 시스템에서 어떤 노드가 UUID를 생성했는지 식별하는 데 유용합니다.
2. **UUID 버전 2**: 버전 1과 유사하지만 POSIX UID/GID와 같은 추가 정보를 포함합니다.
3. **UUID 버전 3**: MD5 해싱을 사용하는 이름 기반 UUID입니다.
4. **UUID 버전 4**: 무작위로 생성되는 UUID로, 타임스탬프나 MAC 주소에 의존하지 않고도 높은 수준의 고유성을 제공합니다.
5. **UUID 버전 5**: 버전 3과 유사하지만 MD5 대신 SHA-1 해싱을 사용합니다.

적절한 버전을 선택하는 것은 시간 기반 식별자의 필요성이나 순수한 무작위 값 등 애플리케이션의 특정 요구사항에 따라 달라집니다.


## **UUID 생성 방법**

### **UUID 생성을 위한 알고리즘과 방법**

UUID의 생성은 버전에 따라 달라집니다:

- **버전 1 UUID**: 현재 타임스탬프와 장치의 MAC 주소를 사용하여 생성됩니다. 이 방법은 서로 다른 노드에서 생성되더라도 UUID가 고유함을 보장합니다.
- **버전 4 UUID**: 난수를 사용하여 생성됩니다. 이 방법은 무작위성을 활용하여 고유성을 보장하므로, 생성 컨텍스트가 중요하지 않은 시나리오에 적합합니다.

예를 들어, TiDB 데이터베이스에서는 `UUID()` 함수를 사용하여 UUID를 생성할 수 있으며, 이는 고유 식별자를 생성하는 과정을 단순화합니다.

### **UUID 생성에서 고유성 보장**

UUID의 고유성을 보장하려면 각 버전의 특성을 이해해야 합니다. 예를 들어, 버전 1 UUID는 타임스탬프와 MAC 주소에 의존하여 고유성을 확보합니다. 반면 버전 4 UUID는 무작위성을 통해 고유성을 달성하며, 충돌 확률이 매우 낮습니다.

분산 시스템에서는 여러 노드에서 충돌 없는 UUID를 생성할 수 있는 능력이 중요합니다. 이는 중앙 집중식 조정의 필요성을 줄이고 시스템 성능을 향상시킵니다.



## **다른 식별 방법과의 비교**

### **UUID vs. 자동 증가 ID**

자동 증가 ID는 데이터베이스에서 기본 키로 일반적으로 사용되는 순차적으로 생성되는 숫자입니다. 구현하기는 간단하지만 몇 가지 제한사항이 있습니다:

- **확장성 문제**: 자동 증가 ID는 중복을 피하기 위해 조정이 필요하므로 분산 시스템에서 병목 현상을 일으킬 수 있습니다.
- **예측 가능성**: 순차적 ID는 예측 가능하므로 URL이나 공개용 애플리케이션에서 사용하기에는 보안성이 떨어집니다.

반면 UUID는 전역적 고유성을 제공하고 예측할 수 없어 보안성과 확장성을 향상시킵니다.

### **UUID vs. 자연 키**

자연 키는 이메일 주소나 주민등록번호와 같은 기존 데이터 속성에서 파생된 식별자입니다. 데이터 검색을 단순화할 수 있지만 단점도 있습니다:

- **데이터 민감성**: 민감한 정보를 키로 사용하면 개인 데이터가 노출될 수 있습니다.
- **고유성 문제**: 자연 키는 항상 고유하지 않을 수 있어 잠재적 충돌을 야기할 수 있습니다.

UUID는 민감하거나 잠재적으로 고유하지 않은 데이터 속성에 의존하지 않고 고유성을 보장함으로써 더 견고한 솔루션을 제공합니다.



## **UUID 사용의 장점**

### **범용성과 고유성**

#### **시스템 간 전역적 고유성**

UUID의 가장 매력적인 장점 중 하나는 서로 다른 시스템 간에 전역적 고유성을 보장하는 능력입니다. 단일 데이터베이스나 애플리케이션 내에서만 고유할 수 있는 기존 식별자와 달리, UUID는 전 세계 모든 시스템에서 고유하도록 설계되었습니다. 이러한 특성은 여러 노드나 서비스가 독립적으로 고유 식별자를 생성해야 하는 분산 환경에서 매우 유용합니다. 예를 들어, 마이크로서비스 아키텍처에서 각 서비스는 충돌을 걱정하지 않고 자체 UUID를 생성할 수 있어 데이터 동기화와 통합을 간소화합니다.

#### **분산 시스템에서 충돌 방지**

분산 시스템에서는 식별자 충돌을 피하는 것이 데이터 무결성 유지에 중요합니다. UUID는 강력한 생성 알고리즘 덕분에 이 점에서 뛰어납니다. 예를 들어, 버전 1 UUID는 타임스탬프와 MAC 주소를 포함하여 서로 다른 노드에서 동시에 두 UUID가 생성되더라도 고유성을 유지합니다. 마찬가지로 버전 4 UUID는 난수를 사용하여 높은 수준의 고유성을 달성합니다. 두 UUID가 충돌할 확률은 천문학적으로 낮아 분산 데이터베이스와 애플리케이션에서 신뢰할 수 있는 선택이 됩니다.

### **확장성**

#### **수평적 확장 촉진**

수평적 확장은 증가하는 부하를 처리하기 위해 시스템에 더 많은 머신이나 노드를 추가하는 것입니다. UUID는 고유 식별자를 생성할 때 중앙 집중식 조정의 필요성을 제거함으로써 이를 촉진합니다. 자동 증가 ID를 사용하는 기존 시스템에서는 중앙 권한이 시퀀스를 관리해야 하므로 시스템이 확장될 때 병목현상을 만듭니다. 그러나 UUID는 각 노드에서 독립적으로 생성될 수 있어 성능 저하 없이 시스템을 수평적으로 확장할 수 있습니다.

#### **데이터베이스 샤딩 단순화**

데이터베이스 샤딩은 성능과 확장성을 향상시키기 위해 여러 서버에 데이터를 분산시키는 기법입니다. UUID는 특정 샤드에 묶이지 않는 고유 식별자를 제공함으로써 이 과정을 단순화합니다. 이는 중복 키의 위험 없이 샤드 간에 데이터를 분산시킬 수 있음을 의미합니다. 또한 UUID는 샤드 간에 쓰기를 더 균등하게 분산시켜 데이터베이스에서 불균형적으로 많은 트래픽을 받는 영역인 핫스팟을 피하는 데 도움이 됩니다.

### **보안과 개인정보 보호**

#### **데이터 보안 강화**

UUID는 공격자가 식별자를 추측하거나 예측하기 어렵게 만들어 데이터 보안을 강화합니다. 쉽게 열거할 수 있는 순차적 ID와 달리, UUID는 복잡하고 비순차적이어서 열거 공격의 위험을 줄입니다. 이는 URL이나 API에서 민감한 정보를 보호하는 데 특히 유용합니다. 예를 들어, 세션 ID나 사용자 토큰에 UUID를 사용하면 유효한 식별자를 추측하는 것이 거의 불가능해져 무단 접근을 방지할 수 있습니다.

#### **식별자의 예측 가능성 감소**

UUID의 예측 불가능성은 애플리케이션에 추가적인 보안 계층을 더합니다. URL이나 API 엔드포인트와 같이 식별자가 사용자에게 노출되는 시나리오에서 UUID를 사용하면 악의적인 행위자가 패턴을 추론하거나 무단 리소스에 접근하는 것을 방지할 수 있습니다. 이러한 예측 불가능성은 보안이 최우선인 공개용 애플리케이션에서 특히 유용합니다. 식별자의 예측 가능성을 줄임으로써 UUID는 무차별 대입 공격과 열거 공격을 포함한 다양한 유형의 공격으로부터 보호하는 데 도움이 됩니다.





--- 
# 혼잣말 

- uuid에는 4가지 종류의 버전이 존재하는구나!
- uuid의 버전 4는 고유성이 잘 보장이 되는구나. 이것은 무작위성을 통해서 고유성을 보장하는군. 어떻게 무작위성을 통해서 고유성이 보장이 된다는 것일까? uuid 버전4에서는 중복될 확률이 천문학적인 확률로 낮다고하는데, 그게 어떻게 가능한것이지..? uuid 내부적으로 기존에 생성했던 id를 저장해둔다던지 그런게 있는건가? 그런건 아니어도 그냥 완전히 무작위로 생성하는데, 그게 고유한 난수로 생성이 된다는 것인가? 그냥 완전히 무작위로 생성하는데 그것에 겹칠확률이 너무나 작다? 그러니까 우주에 존재하는 별을 아무거나 집어내는데, 그 별을 다른 사람이 겹치게 집어낼 확률보다 더 적다? 이런 의미인가?
- 


