# 디스크장치

대용량 저장장치를 위해서 사용하는 하드디스크에 대해서 알아보자.
여기선 하드디스크의 구조와 데이터 전송시간, 전반적인 관리방법, 네트워크로 연결된 저장장치의 종류를 살펴볼 것이다.

## 1. 디스크 장치의 종류

### 하드디스크

#### 원반형태의 하드디스크 :

하드디스크는 원반을 사용한 저장장치로, 맨 앞에 있는 데이터나 맨 뒤에 있는 데이터에 접근하는 속도가 거의 비슷하여  
수많은 시스템에서 본격적으로 하드디스크를 도입했다.

#### 저렴한 하드디스크 :

같은 용량의 메모리보다 훨씬 싸고 데이터도 반영구적으로 저장할 수 있어 많이 사용되고 있는 하드디스크는  
메모리를 보조하는 장치라는 의미에서 제2저장장치라고도 불린다.

### 하드디스크의 구조

- 플래터 :

  - 플래터는 표면에 자성체가 발려있어 자기를 이용하여 0과 1의 데이터를 저장할 수 있다.
  - 플래터의 표면이 N극을 띠면 0으로, S극을 띠면 1로 인식한다.
  - 플래터의 수는 보통 2장으로 구성되며, 항상 일정한 속도로 회전한다.
  - 7500rpm이라고 적혀있다면, 1분에 7500바퀴를 일정한 속도로 회전한다는 의미다.
  - 한 플래터의 위아래 표면을 다 사용하므로 2개의 표면에 데이터가 저장된다.

- 섹터와 블록 :

  - 섹터는 하드디스크의 가장 작은 물리적 저장단위
  - 하나의 섹터에는 한 덩어리의 데이터를 저장
  - 블록은 하드디스크과 컴퓨터 사이에 데이터를 전송하는 논리적인 저장단위 혹은 가장 작은 단위
  - 블록은 여러 개의 섹터로 구성되며 윈도우 운영체제에서는 블록 대신 클러스터라고 표현한다.
  - 하드디스크에서는 블록마다 주소가 배정된다.
  - 하드디스크 입장에서는 섹터가 가장 작은 저장단위이지만, 운영체제 입장에서는 하드디스크에 데이터를 보내거나 받을 때 블록이 가장 작은 저장 단위다.

- 트랙과 실린더 :

  - 트랙은 플래터에서 회전축을 중심으로 데이터가 기록되는 동심원, 즉 동일한 동심원상에 있는 섹터의 집합을 말한다.
  - 헤드는 여러 플래터의 같은 위치에 있는 트랙을 동시에 읽거나 쓸 수 있다.
  - 개념적으로 여러 개의 플래터에 있는 같은 트랙의 집합을 실린더라고 부른다.

- 헤드와 플래터 :
  - 하드디스크에서 데이터를 읽거나 쓸 때는 읽기/쓰기 헤드를 사용한다.
  - 헤드의 수는 데이터가 저장되는 플래터의 표면의 수와 같다.
  - 디스크 암에 붙어 있는 헤드는 아주 가벼운 물체로 만들어져 있다.
  - 플래터가 회전을 시작하면 표면에 약한 바람이 생긴다. 이 바람 때문에 헤드는 표면에서 약간 떠 있는 형태로 작동한다.
  - 헤드가 플래터에 붙어버리면 상처가 생긴다. 그러면 데이터를 저장할 수 없다. 그런 곳을 배드 섹터라고 부른다.

### CD

CD도 데이터를 저장하는 저장장치이다.

#### CD로 데이터를 읽는 방법 :

CD는 표면에 미세한 홈이 파여 있어 헤드에서 발사된 레이저가 홈에 들어가 반사가 되지 않으면 0으로,  
반사되어 돌아오면 1로 인식한다.

### CD와 하드디스크의 비교

#### 단위 차이 :

하드디스크는 성능을 나타내는 단위로 rpm을 사용하고,  
CD는 '배속'을 사용한다.  
하드디스크는 디스크가 작동하는 동안 플래터가 일정한 속도로 돌아가지만,  
CD의 경우 헤드 위치에 따라 디스크의 회전 속도가 변하기 때문에 표현하는 용어가 다른 것이다.

#### 각속도 일정 방식의 회전 :

하드디스크의 플래터는 항상 일정한 속도로 회전하여 바깥쪽 트랙의 속도가 안쪽 트랙의 속도보다 훨씬 빠르다.  
그러므로 가장 바깥쪽에 있는 섹터가 가장 안쪽에 있는 섹터보다 더 크다.  
일정한 시간 동안 이동한 각도가 같다는 의미에서 이러한 방식을 각속도 일정이라고 한다.

#### 선속도 일정 방식의 회전 :

CD에서 사용하는 선속도 일정 방식의 경우 어느 트랙에서나 단위 시간당 디스크의 이동 거리가 같은데,  
이를 구현하려면 헤드가 안쪽 트랙에 있을 때는 디스크의 회전 속도를 빠르게하고, 헤드가 바깥쪽 트랙에 있을 때는  
디스크의 회전 속도를 느리게 해야한다.

#### 각속도 일정 방식의 섹터 :

하드디스크는 트랙마다 속도가 다르기 때문에 섹터의 크기도 다르다.  
대신 모든 트랙의 섹터 수가 같다.  
따라서 안쪽 트랙에 비해 바깥쪽 트랙으로 갈수록 낭비되는 공간이 생기는 것이 단점이다.

#### 선속도 일정 방식의 섹터 :

모든 트랙의 섹터 수가 다르다.

#### 데이터가 채워지는 방식 :

하드디스크는 바깥에서 안쪽으로 데이터가 채워지지만,  
CD의 경우 안쪽에서 바깥쪽으로 데이터가 채워진다.

<br>

## 2. 디스크 장치의 데이터 전송 시간

데이터가 전송되는 과정  
1.하드디스크의 특정 섹터에 저장된 데이터를 읽거나 쓰려면 그 섹터가 있는 트랙까지 헤드가 이동해야 한다.  
이처럼 헤드가 현재 위치에서 그 트랙까지 이동하는 데 걸리는 시간을 탐색 시간이라고 한다.  
2.특정 트랙까지 이동한 헤드는 플래터가 회전하여 원하는 섹터를 만날 때까지 기다린다. 이처럼 원하는 섹터를 만날때까지 회전하는 데 걸리는 시간을 회전 지연 시간이라고 한다.  
3.헤드는 원하는 섹터에 있는 데이터를 읽어 전송하는데, 이때 걸리는 시간을 전송 시간이라고 한다.

그래서 총 데이터를 전송하는 데 걸리는 시간은 다음과 같다.

> > 데이터 전송 시간 = 탐색 시간 + 회전 지연 시간 + 전송 시간

### 가장 많이 걸리는 시간은 탐색 시간

일반적으로 플래터는 7500rpm 이상으로 동작한다.  
즉 1분에 7500번 넘게 회전하기 때문에 회전 지연 시간이 매우 짧고 전자가 이동하는 전송 시간도 매우 짧다.  
그러나 모터로 헤드를 이동해야 하는 탐색 시간은 상대적으로 매우 길다.  
또한 읽고 쓰다보면 조각이 발생하는데, 조각이 많이 발생하면 큰 덩어리의 데이터를 읽을 때 헤드가 여러 곳을 돌아다녀야 하므로  
속도가 느려진다.

<br>

## 3.디스크 장치 관리

### 파티션

파티션은 디스크를 논리적으로 분할하는 작업이다.  
보통 하나의 파티션에 하나의 파일 시스템이 탑재된다.  
윈도우에선 각 파티션에 이름을 부여한다.  
C 드라이브, D 드라이브와 같이 부여한다.

#### 파티션이 너무 많이 생길 때의 문제점 :

서버를 구매하여 100개의 하드디스크를 동시에 관리한다면,  
이름을 짓는데에 한계가 생긴다.  
유닉스에선 이런 문제점을 해결하기 위해 파티션을 통합하는 기능도 지원한다.  
이렇게 통합하는 기능을 마운트라고 한다.

### 포매팅

파티션이 결정되면 포매팅을 한다.  
포매팅은 디스크에 파일 시스템을 탑재하고 디스크 표면을 초기화하여 사용할 수 있는 형태로 만드는 작업을 말한다.

#### 파일 테이블 :

저장장치에서는 디스크에 저장된 파일의 위치와 크기 정보를 담고 있는 파일 테이블을 사용한다.  
이 파일 테이블에는 파일의 이름, 위치 정보 등이 저장되어 있다.

#### 포매팅의 정의 :

빈 저장장치에 파일 테이블을 탑재하는 것이 바로 포매팅이다.

#### 운영체제 마다의 파일 테이블 :

윈도우에는 FAT, NTFS같은 파일 시스템이 있다.  
유닉스에는 I-node와 같은 파일 시스템.

#### 빠른 포매팅 & 느린 포매팅 :

느린 포매팅이 기존의 방식,  
빠른 포매팅은 데이터는 그대로 둔 채 파일 테이블을 초기화하는 방법이다.  
그러므로 처음 하드디스크를 사용할 때는 느린 포매팅을 하고,  
하드시스크를 사용하다가 다시 포매팅을 할 때는 빠른 포매팅을 한다.

<br>

### 조각모음

파일을 저장하고 지우다보면 중간중간에 빈 공간이 생기는데, 이를 조각화 또는 단편화라고 한다.

#### 조각모음을 하는 이유 :

하드디스크에 조각이 많이 생기면 큰 파일이 여러 조각으로 나뉘어 저장되고 이를 읽기 위해 하드디스크의 여러 곳을 돌아다녀야 한다.  
때문에 이는 성능 저하로 이어질 수 있다. 따라서 하드디스크는 주기적으로 조각모음을 해줘야 한다.

<br>

## 4.네트워크 저장장치

네트워크의 발달 덕분에 저장장치를 원격에서 이용할 수 있게 되었다.  
이렇게 저장장치를 한데 모아 관리하면 하면 데이터의 중복을 방지하고 파일 관리를 편리하게 할 수 있다.  
네트워크 저장장치에도 다양한 종류가 있다.

### DAS :

Direct Attached Storage는 서버와 같은 컴퓨터에 직접 연결된 저장장치를 말한다.  
대표적인 예는 윈도우의 파일 공유로,  
여러 컴퓨터 중 하나를 파일 공유 서버로 지정하고 나머지 컴퓨터에서 서버로 지정된 컴퓨터에 접근하여 파일을 이용하는 방식으로 운영된다.

DAS는 컴퓨터에 직접 연결된 저장장치를 사용하기 때문에 다른 운영체제가 쓰는 파일 시스템을 사용할 수 없다.

### NAS :

Network Attached Storage는 기존의 장치를 LAN이나 WAN에 붙여서 사용하는 방식이다.  
NAS는 NAS전용 운영체제를 가진 독립적인 장치로 새로운 하드디스크를 추가하거나 뺄 수 있다.  
NAS는 저장장치를 네트워크상에 두고 여러 클라이언트가 네트워크를 통해 접근하게 함으로써 공유 데이터의 관리 및 데이터의 중복 회피가 가능하다.

### SAN :

Storage Area Network는 NAS보다 진보된 형태의 네트워크 저장장치이다.  
NAS가 저장장치에 네트워크 인터페이스를 부착한 형태라면, SAN은 데이터 서버, 백업 서버, RAID등의 장치를 네트워크로 묶고 데이터 접근을 위한 서버를 두는 형태이다.  
SAN에서는 시스템이 제공하는 인터페이스를 통해 데이터에 접근한다.
