# 요구페이징

- 가져오기 정책 : 프로세스가 필요로 하는 데이터를 언제 메모리로 가져올지 결정하는 것

### 페이지가 스왑영역에 있는 경우 :

1. 요구페이징으로 인해 처음부터 물리 메모리에 올라가지 못한 경우
2. 메모리가 꽉 차서 스왑영역으로 옮겨 온 경우

### 유효비트

페이지 테이블에는 페이지가 메모리에 있는지, 스왑 영역에 있는지 표시를 한다.
이때 사용하는 비트가 유효비트이다.

### 페이지 테이블 엔트리

페이지 테이블 엔트리는 페이지 번호, 플래그 비트, 프레임 번호로 구성되어있다.

### 플래그비트

페이지 테이블 엔트리에 접근 비트, 변경 비트, 유효 비트, 읽기 비트, 쓰기 비트, 실행 비트, 등을 모아 놓은 비트.

- 접근비트 : 페이지가 메모리에 올라온 후 사용한 적이 있는지 알려주는 비트. 참조비트
- 변경비트 : 페이지가 메모리에 올라온 후 데이터의 변경이 있었는지를 알려주는 비트. 더티 비트
- 유효비트 : 페이지가 실제 메모리에 있는지를 나타내는 비트. 현재비트
- 읽기,쓰기,실행 비트 : 페이지에 대한 권한을 나타내는 비트.

<br>

## 페이지 부재 :

- 페이지가 스왑영역에 있는지, 물리 메모리에 있는지 나타내기 위해서 유효비트를 사용한다.

  - 유효비트가 0이라면, 페이지가 메모리에 있다는 의미이다 -> 주소 필드에 프레임 번호가 저장된다.
  - 유효비트가 1이라면, 페이지가 스왑영역에 있다는 의미이다 -> 주소 필드에 스왑영역내 페이지의 주소가 저장된다.

- 프로세스가 페이지를 요청했는데, 페이지가 메모리에 없는 상황을 페이지 부재라고 한다.

### 페이지 부재가 발생했을 때, 프로세스

1.페이지 4를 요청했다고 가정  
2.해당 페이지의 유효비트가 1이라는 것을 확인. 즉 페이지 부재가 발생했음.  
3.현재 메모리가 꽉차 있다면, 메모리의 페이지 중 하나를 스왑영역으로 보낸다. 비어있는 공간이 있다면 그곳에 스왑영역에서 가져온 페이지를 넣는다.  
4.이에 따라 대상 페이지 PTE 1의 유효 비트가 0에서 1로 바뀐다. (메모리에 있다가 스왑아웃된 페이지)  
5.메모리 영역으로 들어온 페이지의 PTE4 유효 비트가 1에서 0으로 바뀐다.

<br>

## 지역성 :

페이지를 스왑영역으로 내보낼 때는 무작위로 내보내는 것이 아니라 지역성을 바탕으로 내보낸다.
되도록 앞으로 사용하지 않을 페이지를 내보내는 것이다.

지역성은 크게 공간의 지역성, 시간의 지역성, 순차적 지역성으로 나뉜다.

### 공간의 지역성 :

현재 위치에서 가까운 데이터에 접근할 확률이 먼 거리에 있는 데이터 접근할 확률이 높다는 것
<br>

### 시간의 지역성 :

현재를 기준으로 가장 가까운 시간에 접근한 데이터가 더 먼 시간에 접근한 데이터보다 사용될 확률이 높다는 것
<br>

### 순차적 지역성 :

여러 작업이 순서대로 진행되는 경향이 있다는 것
