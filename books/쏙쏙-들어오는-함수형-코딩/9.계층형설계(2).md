
# 9. 계층형 설계(2)


- 이 장의 결론 : 계층형 설계는 바로 아래 계층에 있는 함수로 현재 계층의 함수를 구현해 코드를 구성하는 기술이다. 어떤 코드를 테스트하는 것이 더 좋고, 변경하거나 재사용하기 쉬운 코드는 어떤 코드인지에 대해서는 계층 구조를 통해서 쉽게 확인할 수 있다.  
- 요점 정리 : 
	- 추상화 벽 패턴을 사용하면 세부적인 것을 완벽히 감출 수 있다. 때문에 더 높은 차원에서 생각할 수 있게 된다. 
	- 작은 인터페이스 패턴을 사용하면 완성된 인터페이스에 가깝게 계층을 만들 수 있다. 중요한 비즈니스 개념을 표현하는 인터페이스는 한번 잘 만들어 놓고 더 바뀌거나 늘어나지 않아야 한다. 
	- 편리한 계층 패턴을 이용하면 다른 패턴을 요구 사항에 맞게 사용할 수 있다. 패턴을 사용하다 보면 과한 추상화를 할 수 있다. 패턴들은 요구 사항에 맞게 적용해야한다. 
	- 호출 그래프 구조에서 규칙을 얻을 수 있다. 이 규칙으로 어떤 코드를 테스트 하는 것이 가장 좋은지, 유지보수나 재사용하기 좋은 코드는 어디에 있는 코드인지를 알 수 있다. 



## 패턴2 : 추상화 벽 

추상화벽은 여러 문제를 해결하는 데, 그 중 하나는 팀 간 책임을 명확하게 나누는 것이다. 

> 추상화 벽은 세부 구현을 감춘 함수로 이루어진 계층이다. 

추상화 벽에 함수들을 잘 넣어두면 대칭적인 효과를 얻을 수 있다. 이 함수를 사용하는 곳이나, 이 함수를 구현하는 곳이나 모두 독립적으로 작업을 할 수 있다는 것이다. 예를 들어서 구현하는 팀에서 장바구니의 데이터 구조를 바꾼다 할 지라도, 사용부의 사람들에게는 어떤 영향도 가지 않게 된다. 


### 추상화 벽이 있으면 구체적인 것을 신경쓰지 않아도 된다

> 추상화 벽은 어떤 것을 신경 쓰지 않아도 되지? 라는 말을 거창하게 표현한 개념이다. 

계층 구조에서 어떤 계층에 있는 함수들이 장바구니와 같이 공통된 개념을 신경 쓰지 않아도 된다면 그 계층을 추상화 벽이라고 할 수 있다. 추상화 벽은 필요하지 않은 것은 무시할 수 있도록 간접적인 단계를 만든다. 


### 추상화 벽은 언제 사용하면 좋을까? 

1. 쉽게 구현을 바꾸기 위해 : 구현에 대한 확신이 없는 경우에 추상화벽을 사용하면 구현을 간접적으로 사용할 수 있기 때문에 나중에 구현을 바꾸기 쉽다. 프로토타이핑과 같이 최선의 구현을 확신할 수 없는 작업에 유용하다. 
2. 코드를 읽고 쓰기 쉽게 만들기 위해 : 추상화 벽을 사용하면 세부적인 것을 신경 쓰지 않아도 된다. 적절한 것을 감추면 더 생산적인 코드를 만들 수 있다. 
3. 팀 간에 조율해야 할 것을 줄이기 위해 : 추상화 벽을 사용하면 각 팀에 관한 구체적인 내용을 서로 신경 쓰지 않아도 일할 수 있다. 게다가 더 빠르게 일할 수 있게 된다. 
4. 주어진 문제에 집중하기