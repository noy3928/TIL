### 날짜 : 2022-11-14 21:39
### 주제 : #함수형프로그래밍 #모나드 

---- 

### 메모 : 
- 비동기 상황이 값이라는 것은 이 값을 함수에게 전달할 수 있고, 
	- 해당 값이 프로미스인지 아닌지를 확인할 수 있다는 이야기다 
- 이런 성질들을 활용해서 재미있는 함수를 만들 수 있다. 
	- 일급을 활용해서 많은 함수들을 만들어보자. 

```javascript
const go1 = (a, f) => f(a)
const add5 = a => a + 5;

go1(10, add5)
```
- go1함수가 제대로 동작하기 위한 조건 
	- f가 동기적으로 동작해야한다.
	- a도 동기적으로 바로 값을 알 수 있는 그런 값이어야 한다는 말이다. 
	- 그러니까 다시 말하면 promise가 아닌 값이 이 자리에 들어와야지 값을 적용할 수 있는 상황이 되는 것이다. 
	
- 만약에 이 상황에서 go1에 첫번째 인자로 들어간 10이라는 값이 시간이 지난 후에야 알 수 있는 값이라면 어떻게 될까? 
```javascript
go1(Promise.resolve(10), add5) // [object Promise]5 이런식으로 출력 
```
- 값을 제대로 출력할 수 없는 상황이 된다. 
- 위와 같은 코드도 정상으로 동작하게 만들려면 어떻게 해야할까? 

```javascript
const delay100 = a => new Promise(resolve => setTimeout(() => resolve(a),100)) // a라는 값을 받아두었다가 100ms 후에 그대로 반환해주는 함수 
```
- promise가 일급이라는 성질을 활용해서 코드를 작성해보자. 동기적으로 작성가능하도록 

```javascript
const go1 = (a, f) => a instanceof Promise ? a.then(f) : f(a);

go1(delay100(10), add5)  // Promise{<pending>}
```
- go1 함수를 다형성을 지원하도록 작성했다. 
- 이제 이것을 사용해보면, 

```javascript
const r = go1(10, add5)

log(r) // 15

const r2 = go1(delay100(10), add5);
r2.then(log) // 15
```
- 이렇게 두 코드 모두 동기적으로 작동하도록 작성했다.

- go1 함수안에서 일급으로 다뤄질 수 있는 값을 비동기 상황인지를 체크해서, then으로 결과를 만들어나가거나, 즉시 값을 만드는 방식으로 만들 수 있다. 

- 어떤 상황 (대기, 성공, 실패)를 하나의 값으로 만들어버려서, 그것을 체이닝하여 연산을 이어나갈 수 있게 해준 것이 promise의 가장 큰 특징이다. 


### 내 생각과 정리 : 
- 이 강의에서는 promise가 일급이라는 사실을 활용해서 어떻게 동기적으로 코드를 작성할 수 있는지를 보여주고 있었다. 
- promise가 일급이라는 사실을 이용하면 이것을 하나의 값으로 취급해서 어떤 값인지 확인을 하고, 그에 알맞는 동작을 추가할 수 있게 된다. 


### 출처(참고문헌) : 



### Link : 
