# 역할, 책임, 협력

- 객체지향 패러다임 관점에서 핵심은 역할, 책임, 협력이다.
- 객체지향의 본질은 협력하는 객체들의 공동체를 창조하는 것이다.
- 역할, 책임, 협력이 제자리를 찾지 못한 상태라면 응집도 높은 클래스와 중복 없는 상속 계층을 구현한다고 해도 어플은 침몰할 것이다.

# 01 협력

## 영화 예매 시스템 돌아보기

- 어플의 제어 흐름은 객체들 사이에 균형있게 분배되는 것이 일반적이다.
- 핵심은 객체들이 메시지를 주고 받으며 상호작용한다는 것이다.
- 이런 상호작용을 협력이라고 한다.
- 협력에 참여하기 위해 수행하는 로직은 책임이다.
- 책임들이 모여 역할을 구상한다.(? 이부분은 아직 이해가 안된다.)

<br>

요약 : 영화 예매 시스템 속에서 발견할 수 있었던 협력이 무엇인지 소개한다. 협력은 객체들 사이에 메시지를 주고받는 상호작용을 말한다.

## 협력

- 객체지향의 세계에선 협력을 통해 기능을 구현한다.
- 메시지 전송은 객체 사이의 협력을 위해 사용할 수 있는 유일한 커뮤니케이션 수단이다.

> 협력이란 어떤 객체가 다른 객체에게 무엇인가를 요청하는 것이다. 한 객체는 어떤 것이 필요할 때 다른 객체에게 전적으로 위임하거나 서로 협력한다. 즉, 두 객체가 상호작용을 통해 더 큰 책임을 수행하는 것이다. 객체 사이의 협력을 설계할 때는 객체를 서로 분리된 인스턴스가 아닌 협력하는 파트너로 인식해야 한다.

- 메시지를 수신한 객체는 메서드를 통해 요청에 응답한다.
  - 메시지를 처리할 방법은 객체가 스스로 선택한다.
  - 외부객체는 메시지만 전송할 뿐 수신한 객체가 처리하는 방법은 모른다.
- 객체를 자율적으로 만드는 가장 기본적인 방법은 캡슐화다.

<br>

요약 : 객체지향에서 협력의 의미가 무엇인지 살펴본다. 협력은 객체들 사이의 상호작용이다. 객체들은 메시지를 통해서 상호작용을 하며, 메시지를 수신한 객체는 그것을 어떻게 처리할 지 자율적으로 선택한다. 메시지를 보내는 당사자는 수신자가 그것을 어떻게 처리할지 모르는데, 이것이 잘 수행되어있는 것을 캡슐화가 잘 되었다고 할 수 있다. 이런 캡슐화를 통해 객체는 외부의 간섭을 받지 않는 자율적인 존재가 된다.

## 협력이 설계를 위한 문맥을 결정한다

- 객체 : 상태와 행동을 함께 캡슐화하는 실행 단위
  - 객체의 상태와 행동을 어떤 기준으로 정해야할까?
- 객체는 섬이 아니다.
  - 객체가 필요한 단 하나의 이유 : 그 객체가 어떤 협력에 참여하고 있기 때문이다.
  - 객체가 협력에 참여할 수 있는 이유 : 협력에 필요한 적절한 행동을 보유하고 있기 떄문
- 객체의 행동을 결정하는 것 : 객체가 참여하고 있는 협력
  - 협력이 바뀌면 객체의 행동도 바뀐다.
- 객체의 상태를 결정하는 것 : 객체의 행동
  - 객체의 상태는 그 객체가 행동을 수행하는 데 필요한 정보가 무엇인지로 결정된다.
- 협력은 객체를 설계하는데 필요한 문맥을 제공한다.
  - 상태는 객체가 행동하는 필요한 정보에 의해 결정되고
  - 행동은 협력 안에서 객체가 처리할 메시지로 결정되기 때문이다.

<br>

요약 : 객체는 결국 문맥에 의해서 결정된다. 협력의 문맥속에서 객체의 행동이 결정되고, 그 행동이 객체의 상태를 결정짓는다. 협력의 문맥을 고려해야만 결국 객체를 정의내릴 수 있다.

# 02 책임

## 책임이란 무엇인가

- 협력에 참여하기 위해 객체가 수행하는 행동을 책임이라고 부른다.
- 객체의 책임은 크게 하는 것과 아는 것으로 나누어져있다.
  - 하는 것
    - 객체를 생성하거나 계산을 수행하는 등의 스스로 하는 것
    - 다른 객체의 행동을 시작하는 것
    - 다른 객체의 활동을 제어하고 조절하는 것
  - 아는 것
    - 사적인 정보에 관해 아는 것
    - 관련된 객체에 관해 아는 것
    - 자신이 유도하거나 계산할 수 있는 것에 관해 아는 것
- 책임과 메시지는 다르다. 크기부터 다르다.
  - 책임은 객체가 수행할 수 있는 행동을 종합적이고 간략하게 서술했기 때문에 메시지보다 추상적이고 개념적으로도 크다.
  - 단순한 책임이라고 생각했던 것이 여러개의 메시지로 분할되기도 한다.
- 아는 것과 하는 것은 밀접하게 연관되어 있다.
  - 객체는 자신이 맡은 책임을 수행하는 데 필요한 정보를 알고 있을 책임이 있다.
  - 자신이 수행할 수 없는 일을 도와 줄 객체를 알고있을 책임이 있다.
- 객체지향의 핵심 : 책임
  - 크레이그 라만 => "객체지향 개발에서 가장 중요한 능력은 책임을 능숙하게 소프트웨어 객체에 할당하는 것"
  - 협력이 중요한 이유도 결국 객체에게 적절한 책임을 부여할 문맥을 제공하기 때문이다.
  - 객체에게 얼마나 적절한 책임을 할당하느냐가 설계의 전체적인 품질을 결정한다.

<br>

요약 : 객체지향의 핵심이 되는 책임이 무엇인지에 대해서 설명하고 있다.

## 책임 할당

- 책임을 수행하는 데 필요한 정보를 가장 잘 알고 있는 전문가에게 그 책임을 할당하는 것이다.
  - 이것를 정보전달 패턴이라고 한다. INFORMATION EXPERT
- 다른 객체에게 책임을 할당하기 위해서 필요한 것 : 협력이라는 문맥
  - 이 문맥이 정의되어 있어야 다른 객체에게 책임을 할당할 수 있다.
- 협력을 설계하는 출발점
  - 시스템이 사용자에게 제공하는 기능을 시스템이 담당할 하나의 책임으로 바라보는 것
  - 시스템의 책임을 완료하는 데 필요한 더 작은 책임을 찾아내고 이를 객체들에게 할당하는 반복적인 과정을 통해 모양을 갖춘다.
- 책임을 할당하는 과정
  - 예매하라
    - 예매하는 책임을 누구에게 할당할까?
    - 영화 예매와 관련된 정보를 가장 많이 알고 있는 객체에게 책임을 할당하자.
    - Screening이 가장 많이 알고있는 것 같다.
  - Screening : 가격을 계산하라
    - screening은 예매 가격을 계산하는데 필요한 정보를 충분히 알고 있지 못하다.
    - 때문에 가격 계산을 위한 전문가에게 이 일을 맞겨야 한다.
    - Movie가 영화 가격에 대한 가장 많은 정보를 알고 있는 것 같다.
  - Movie : 할인 요금을 적용하라
    - 그런데 Movie는 할인 요금과 관련된 정보를 알고 있지 못하다.
    - 또 이 일을 부여할 책임자를 찾아야할 것 같다.
- 이처럼 책임을 할당하는 과정은 적절한 객체를 찾고 할당하는 과정을 거친다.
  <br>

요약 : 책임 할당의 의의에 대해서 설명하고 있으며, 그것이 어떻게 이루어지는지를 설명하는 파트였다.

## 책임 주도 설계

- 책임주도설계 :
  - 책임을 찾고 책임을 수행할 적절한 객체를 찾아 책임을 할당하는 방식으로 협력을 설계하는 방법을 책임주도설계라고 한다.
- 책임주도설계의 과정
  - 시스템이 사용자에게 제공해야하는 기능인 시스템 책임을 파악한다.
  - 시스템 책임을 더 작은 책임으로 분할한다.
  - 분할된 책임을 수행할 수 있는 적절한 객체 또는 역할을 찾아 책임을 할당한다.
  - 객체가 책임을 수행하는 도중 다른 객체의 도움이 필요한 경우 이를 책임질 적절한 객체 또는 역할을 찾는다.
  - 해당 객체 또는 역할에게 책임을 할당함으로써 두 객체가 협력하게 한다.
- 책임을 할당할 때, 고려해야 할 2가지 요소
  1. 메시지가 객체를 결정한다.
  2. 행동이 상태를 결정한다.

<br>

요약 : 앞에서 이야기했던 내용들을 정리하면서, 책임주도설계가 무엇인지를 설명한다.

## 메시지가 객체를 결정한다

- 메시지를 먼저 식별했다.
  - 메시지를 처리할 객체를 나중에 선택했다는 사실이 중요하다.
  - 다시말해 객체가 메시지를 선택하는 것이 아니라, 메시지가 객체를 선택한다는 것이다.
- 메시지가 객체를 선택해야하는 2가지 이유 :
  1. 객체가 최소한의 인터페이스를 가질 수 있게 한다.
     - 객체는 어플에 크지도, 작지도 않은 꼭 필요한 크기의 퍼블릭 인터페이스를 가질 수 있다.
  2. 객체는 충분히 추상적인 인터페이스를 가질 수 있다.
     - 메시지를 먼저 식별하면 무엇을 수행할지에 초점을 맞추는 인터페이스를 얻을 수 있다.
     - 어떻게는 감출 수 있다.
- 메시지를 먼저 식별함으로써 객체의 책임을 할당한 결과
  - 객체들의 인터페이스는 충분히 추상적인 동시에 최소한의 크기를 유지할 수 있었다.

<br>

요약 : 책임을 할당할 때, 고려해야할 첫번째 요소로 메시지를 먼저 식별하는 것의 중요성에 대한 이야기를 하고 있었다. 메시지를 먼저 식별해야만, 적절한 인터페이스를 가지게 할 수 있다.

## 행동이 상태를 결정한다

- 객체를 객체답게 만드는 것 : 행동
- 객체가 협력에 참여하는 방법 : 행동
  - 협력에 적합한지를 판단하는 기준은 객체의 상태가 아니라 행동이다.
- OOP에 처음입문한 사람들이 하는 실수
  - 행동보다 상태에 초점을 맞추는 것
  - 이런 방식은 캡슐화를 저해한다.
  - 이렇게 상태에 초점을 맞춰서 구현하는 방법을 데이터 주도 설계라고 한다.
- 항상 협력이라는 문맥속에서 객체를 생각해야한다.
  - 그래야 캡슐화를 위반하지 않도록 구현에 대한 결정을 뒤로 미룰 수 있다.
    - 아 상태에 먼저 집중하면 구현에 대한 결정을 먼저 생각하게 되겠구나.
- 중요한 것은 객체의 상태가 아닌 행동이다.

<br>

요약 : 책임을 할당하려 할 때, 주의해야할 2번째 요소를 설명하고 있었다. 객체를 설계할 때는 행동을 먼저 생각해야한다. 행동을 결정한 다음에 상태가 결정된다. 이렇게 해야만 객체지향적인 설계를 할 수 있다.

# 03 역할

## 역할과 협력

## 유연하고 재사용 가능한 협력

## 객체 대 역할

## 역할과 추상화

## 배우와 배역
